{"id":"Clavain-00s","title":"Add upstream-sync PR codex refresh reminder workflow","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:04:52Z","created_by":"mk","updated_at":"2026-02-08T15:05:17Z","closed_at":"2026-02-08T15:05:17Z","close_reason":"Closed"}
{"id":"Clavain-021h","title":"F6: Shared Gate Library","description":"hooks/lib-gates.sh with check_phase_gate(), advance_phase(), VALID_TRANSITIONS array. Dual persistence to beads + artifact headers.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:51.236048561-08:00","created_by":"mk","updated_at":"2026-02-12T15:48:36.865454842-08:00","closed_at":"2026-02-12T15:48:36.865454842-08:00","close_reason":"Gate library shipped (lib-gates.sh, 47 bats tests). Statusline bead integration added v0.4.52.","labels":["phase:planned"],"dependencies":[{"issue_id":"Clavain-021h","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.388784456-08:00","created_by":"mk"},{"issue_id":"Clavain-021h","depends_on_id":"Clavain-z661","type":"blocks","created_at":"2026-02-12T11:02:04.461320922-08:00","created_by":"mk"}]}
{"id":"Clavain-021h.1","title":"State change: phase → planned","description":"Set phase to planned\n\nReason: Plan: docs/plans/test.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T15:18:50.75174757-08:00","created_by":"mk","updated_at":"2026-02-12T15:18:50.75174757-08:00","dependencies":[{"issue_id":"Clavain-021h.1","depends_on_id":"Clavain-021h","type":"parent-child","created_at":"2026-02-12T15:18:50.755619074-08:00","created_by":"mk"}]}
{"id":"Clavain-089","title":"Move fd-code-quality and fd-user-experience to Adaptive Reviewers","description":"Merge Domain Specialists into Adaptive Reviewers with dual-mode behavior (codebase-aware when docs exist, generic fallback otherwise). Change model from sonnet to inherit. Update SKILL.md roster, scoring rules, and all references to Domain Specialists category.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T12:02:22Z","created_by":"mk","updated_at":"2026-02-09T12:05:11Z","closed_at":"2026-02-09T12:05:11Z","close_reason":"Merged Domain Specialists into Adaptive Reviewers with dual-mode behavior"}
{"id":"Clavain-08w","title":"Fix /triage broken markdown (code fence leak)","description":"commands/triage.md Final Summary section has improperly nested code fences around line 196-310. Four-backtick fence opens but subsequent content appears outside with its own triple-backtick fences. Source: flux-drive P2-7.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:21:09Z","created_by":"mk","updated_at":"2026-02-08T23:08:17Z","closed_at":"2026-02-08T23:08:17Z","close_reason":"Closed"}
{"id":"Clavain-09c","title":"P1: resolve-* commands share 80% identical structure — consolidate","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-0b32","title":"[fd] Define \"source code\" in clodex behavioral contract — explicit extension allowlist","description":"From flux-drive review of joyful-wondering-seal (2026-02-12).\n\nAgents: fd-prompt-engineering (P0-2), fd-quality (P0-2)\nConvergence: 2/4 agents\n\nThe clodex session-start injection says \"Do NOT use Edit/Write on source code\" but never defines what source code means. The existing hook had a precise 16-extension allowlist. The injection uses vague \"etc.\" which leaves Claude guessing whether .proto, Makefile, Dockerfile, .sql are source code.\n\nFix: Include the full allowlist from behavioral-contract.md in the injection text. Either list all allowed extensions explicitly or state a clear heuristic.\n\nAlso add Bash write restriction (echo/sed/tee \u003e source.py) which is an unguarded bypass vector (fd-prompt-engineering P0-1, 1/4 agents).\n\nReview output: docs/research/flux-drive/joyful-wondering-seal/","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:23:50.09630533-08:00","created_by":"mk","updated_at":"2026-02-12T20:42:36.874885051-08:00","closed_at":"2026-02-12T20:42:36.874885051-08:00","close_reason":"Addressed: session-start injection now includes full 16-extension allowlist (.md/.json/.yaml/.yml/.toml/.txt/.csv/.xml/.html/.css/.svg/.lock/.cfg/.ini/.conf/.env) plus /tmp/*. Bash restriction added (no redirects, sed -i, tee). behavioral-contract.md updated."}
{"id":"Clavain-0d3a","title":"flux-gen UX: onboarding, integration, docs mentions","description":"Remaining fd-user-product findings: P1-1 (missing onboarding context about when/why to use flux-gen), P1-2 (generated agents passive until next flux-drive run — no prompt suggesting it), P1-3 (confirmation options lack clear consequences), P1-4 (no guidance for partial agent spec coverage), IMP-2 (no link from flux-drive to flux-gen when domains detected), IMP-5 (AGENTS.md and doctor.md don't mention flux-gen).","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T19:19:52.390885526-08:00","created_by":"mk","updated_at":"2026-02-12T19:19:52.390885526-08:00"}
{"id":"Clavain-0je","title":"Remove --yolo and --dangerously-bypass-approvals-and-sandbox from dispatch.sh passthrough","description":"dispatch.sh:143 whitelists dangerous Codex flags for passthrough. A prompt injection could disable safety guardrails. Either remove from whitelist or require CLAVAIN_ALLOW_UNSAFE=1 env var. Source: flux-drive SEC-3 (MEDIUM).","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:04Z","created_by":"mk","updated_at":"2026-02-09T00:14:37Z","closed_at":"2026-02-09T00:14:37Z","close_reason":"--yolo and --dangerously-bypass-approvals-and-sandbox blocked by default in dispatch.sh. CLAVAIN_ALLOW_UNSAFE=1 override added."}
{"id":"Clavain-0uzm","title":"Add Step 1.0 domain classification to flux-drive triage","description":"Add domain detection to Phase 1: read project signals, match against index.yaml, generate .claude/flux-drive.yaml. Includes LLM fallback for unrecognized domains.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:19.939339126-08:00","created_by":"mk","updated_at":"2026-02-12T13:54:45.927274967-08:00","closed_at":"2026-02-12T13:54:45.927274967-08:00","close_reason":"Implemented domain classification in SKILL.md: Step 1.0a with cache, weighted scoring, LLM fallback; domain fields in both profiles; game filter + domain bonus in scoring; new game project scoring example. All 585 structural tests pass.","dependencies":[{"issue_id":"Clavain-0uzm","depends_on_id":"Clavain-cl34","type":"blocks","created_at":"2026-02-12T10:46:26.35267055-08:00","created_by":"mk"}]}
{"id":"Clavain-0xm","title":"Merge agent-sdk-dev into Clavain","description":"Pull /new-sdk-app command + agent-sdk-verifier-py + agent-sdk-verifier-ts from the official agent-sdk-dev plugin. Scaffolds standalone Agent SDK apps (Python/TS) with best practices verification. Highest-impact merge — fills the biggest gap.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-16r","title":"Add scripts/validate-roster.sh to check roster-to-file correspondence","design":"docs/plans/plan-clavain-16r.md","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:52Z","created_by":"mk","updated_at":"2026-02-10T08:44:52Z","closed_at":"2026-02-10T08:44:52Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-16r","depends_on_id":"Clavain-th4","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-1by","title":"Validation scripts only check 1 of 3 hooks","description":"CLAUDE.md quick commands section only validates session-start.sh with bash -n. Should also validate agent-mail-register.sh and dotfiles-sync.sh.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:17Z","created_by":"mk","updated_at":"2026-02-08T08:38:40Z","closed_at":"2026-02-08T08:38:40Z","close_reason":"Already fixed — CLAUDE.md lines 19-21 check all 3 hooks"}
{"id":"Clavain-1li","title":"Create CI workflow for test suite","description":"Create .github/workflows/test.yml with two jobs: (1) structural-and-shell: runs Tier 1+2 on every push and PR, ubuntu-latest, no secrets needed, ~30-45s. (2) smoke: runs Tier 3 on daily cron + workflow_dispatch + path-filtered push (hooks/agents/skills/.claude-plugin changes only), needs ANTHROPIC_API_KEY, 30min timeout, skip condition for forks. Per plan: docs/plans/2026-02-10-test-suite-design.md Step 5.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:16Z","created_by":"mk","updated_at":"2026-02-10T13:00:32Z","closed_at":"2026-02-10T13:00:32Z","close_reason":"Created .github/workflows/test.yml with structural+shell (every push) and smoke (schedule/manual) jobs, plus tests/run-tests.sh local runner","dependencies":[{"issue_id":"Clavain-1li","depends_on_id":"Clavain-g1w","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"},{"issue_id":"Clavain-1li","depends_on_id":"Clavain-j25","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-1rl","title":"codex-delegation missing from routing table Layer 2","description":"The using-clavain/SKILL.md routing table Layer 2 (Execution) doesn't mention codex-delegation or codex-first-dispatch skills.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:25Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-1va","title":"Remove manual token trimming from launch.md — trust 200K context windows","design":"docs/plans/plan-clavain-1va.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:51Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-1x6","title":"Add sync workflow preflight for required API secrets","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:32:37Z","created_by":"mk","updated_at":"2026-02-08T15:33:50Z","closed_at":"2026-02-08T15:33:50Z","close_reason":"Closed"}
{"id":"Clavain-1yg","title":"Expand upstream file mappings for beads/oracle/agent-mail","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T17:04:13Z","created_by":"mk","updated_at":"2026-02-08T17:08:20Z","closed_at":"2026-02-08T17:08:20Z","close_reason":"Closed"}
{"id":"Clavain-21l","title":"Update validate-roster.sh for 6 agents","description":"Update the roster validation script to check 6 v2 agents instead of 19 v1 agents in the Plugin Agents table.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:24Z","created_by":"mk","updated_at":"2026-02-10T09:59:18Z","closed_at":"2026-02-10T09:59:18Z","close_reason":"Phase 3 complete — all Codex agents succeeded","dependencies":[{"issue_id":"Clavain-21l","depends_on_id":"Clavain-oxr","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-246","title":"Modernize spec-flow-analyzer system prompt style","description":"spec-flow-analyzer still opens with 'You are an elite User Experience Flow Analyst and Requirements Engineer.' The consolidated agents dropped the superlative pattern in favor of straightforward role statements. Low priority cosmetic alignment.","status":"closed","priority":4,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T11:42:26Z","created_by":"mk","updated_at":"2026-02-09T11:56:43Z","closed_at":"2026-02-09T11:56:43Z","close_reason":"Codex agents completed all 3 tasks successfully"}
{"id":"Clavain-27u","title":"Replace YAML frontmatter with rigid markdown Findings Index + central findings.json","description":"From 3-model debate consensus (Oracle's approach). Replace YAML frontmatter requirement with:\n\n1. Agents output a rigid markdown pattern:\n   ### Findings Index\n   - P0 | P0-1 | \"Section\" | Title\n   - P1 | P1-1 | \"Section\" | Title\n   Then standard prose: Summary, Issues Found, Improvements Suggested, Overall Assessment\n   Last line: Verdict: safe|needs-changes|risky\n\n2. Orchestrator generates {OUTPUT_DIR}/findings.json centrally after synthesis (Phase 3)\n3. Remove Step 3.1 YAML validation — no longer needed\n4. Remove malformed/fallback classification\n5. Update prompt template in launch.md to use new format\n6. Update review-agent.md Codex template to match\n\nKey insight: centralize structured output at the orchestrator, don't distribute schema compliance across stochastic writers.\n\nFiles: skills/flux-drive/phases/launch.md (prompt template), skills/flux-drive/phases/synthesize.md (remove 3.1, add findings.json generation), skills/clodex/templates/review-agent.md","design":"docs/plans/plan-clavain-27u.md","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:40Z","created_by":"mk","updated_at":"2026-02-10T08:44:52Z","closed_at":"2026-02-10T08:44:52Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-27u","depends_on_id":"Clavain-7p2","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-29cx","title":"flux-gen + flux-drive integration: auto-gen, staleness detection, agent lifecycle","description":"Auto-run flux-gen inside flux-drive when domains detected but no project agents exist. Three-tier staleness detection (hash → git → mtime) for cache invalidation. Agent lifecycle management via YAML frontmatter (orphan/missing detection). Plan reviewed by fd-architecture, fd-correctness, fd-quality — all P0/P1 findings incorporated. See docs/plans/2026-02-12-flux-gen-drive-integration.md. Files: detect-domains.py (--check-stale, atomic writes, exit code 4, timestamps), SKILL.md (Steps 1.0.2-1.0.4), flux-gen.md (frontmatter template).","notes":"Smoke test session — not related to this bead. All 25/25 smoke tests passed (17 agents, 5 commands, 3 workflows). No code changes to flux-gen integration.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:59:16.475529975-08:00","created_by":"mk","updated_at":"2026-02-12T21:23:12.084271984-08:00","closed_at":"2026-02-12T21:23:12.084271984-08:00","close_reason":"flux-gen + flux-drive integration complete: 3-tier staleness detection, structural hash, atomic cache writes, Steps 1.0.2-1.0.4 in SKILL.md, YAML frontmatter template, 696/696 tests pass","labels":["phase:done"]}
{"id":"Clavain-29cx.1","title":"State change: phase → shipping","description":"Set phase to shipping\n\nReason: Quality gates passed","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T21:19:58.954837833-08:00","created_by":"mk","updated_at":"2026-02-12T21:19:58.954837833-08:00","dependencies":[{"issue_id":"Clavain-29cx.1","depends_on_id":"Clavain-29cx","type":"parent-child","created_at":"2026-02-12T21:19:58.95892954-08:00","created_by":"mk"}]}
{"id":"Clavain-29cx.2","title":"State change: phase → done","description":"Changed phase from shipping to done\n\nReason: Shipped v0.5.4 with Tier 2 test coverage","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T21:20:13.231687839-08:00","created_by":"mk","updated_at":"2026-02-12T21:20:13.231687839-08:00","dependencies":[{"issue_id":"Clavain-29cx.2","depends_on_id":"Clavain-29cx","type":"parent-child","created_at":"2026-02-12T21:20:13.233147364-08:00","created_by":"mk"}]}
{"id":"Clavain-2e4","title":"Delete clodex-toggle.md (redundant alias for codex-first)","description":"clodex-toggle.md is 16 lines that say 'follow codex-first'. Both appear in routing table and Quick Reference. Delete the file, update routing table and Quick Reference. Source: flux-drive P2-1 (3 agents agree).","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:11Z","created_by":"mk","updated_at":"2026-02-08T23:11:18Z","closed_at":"2026-02-08T23:11:18Z","close_reason":"Deleted clodex-toggle.md, removed from routing tables, updated command counts 27→26 in CLAUDE.md, README.md, AGENTS.md, plugin.json"}
{"id":"Clavain-2em","title":"P0: agent-native-audit uses invalid skill invocation syntax","description":"- type: bug","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T20:13:26Z","closed_at":"2026-02-07T20:13:26Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-2kf","title":"Default to summary.md for file inputs, opt-in for inline annotations","design":"docs/plans/plan-clavain-2kf.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:43Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-2kt","title":"escape_for_json duplicated in 2 hooks","description":"Both session-start.sh and agent-mail-register.sh define their own escape_for_json function. Consider extracting to shared hooks/lib.sh.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:20Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-2mmc","title":"Clarify flux-drive instruction ambiguities from v0.5.4 quality review","description":"P1/P2 documentation + hardening fixes from quality reviews (v0.5.4):\n\n**From fd-quality review:**\n1. Step 1.0.2 exit code 1 handling unclear — add 'Use core plugin agents only' clarification\n2. Step 1.0.3 'change flag' referenced but Step 1.0.4 decision matrix implicitly handles it\n3. Orphan agent handling incomplete in Step 1.0.4 — add 'report but do NOT delete' instruction\n4. Timestamp format not specified in flux-gen.md frontmatter — add '+00:00' example\n5. Exit code 1 docstring in detect-domains.py says 'LLM fallback' but SKILL.md says 'skip' — harmonize\n6. Cache version check missing from SKILL.md Step 1.0.2 and flux-gen.md Step 1\n\n**From fd-correctness review:**\n7. Shallow clone false-fresh: tier 2 git log returns empty for shallow clones — detect and fall to tier 3\n8. Naive datetime parsing: fromisoformat() accepts timezone-less strings — add UTC fallback\n9. Cache version comparison uses \u003c instead of != — future versions silently accepted\n10. Git subprocess stderr discarded — log on non-zero exit for debugging","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T21:20:48.850927042-08:00","created_by":"mk","updated_at":"2026-02-12T21:37:55.990222885-08:00"}
{"id":"Clavain-2nx","title":"P1: writing-skills overweight (656 lines) — extract TDD tutorial","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-2ry","title":"learnings-researcher model: haiku undocumented","description":"agents/research/learnings-researcher.md uses model: haiku instead of inherit. This is the only agent with a non-inherit model. The rationale is sound but undocumented.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:23Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-2yx","title":"Strip \u003cexample\u003e blocks from agent prompts during flux-drive dispatch","description":"During flux-drive launch (Phase 2), the orchestrator should strip \u003cexample\u003e/\u003ccommentary\u003e blocks from agent .md file content before including it in the task prompt. These blocks exist for triage routing (helping the orchestrator decide relevance) but serve no purpose inside the agent's own execution context. Saves ~500-1500 chars per agent × N agents = 1-3K tokens per run. Implementation: in the prompt construction step of launch.md, add an instruction for the orchestrator to strip \u003cexample\u003e...\u003c/example\u003e blocks from agent system prompts before pasting them into task prompts. Only affects Project Agents (whose .md content is pasted manually) — Adaptive Reviewers load system prompts natively via subagent_type. Files: skills/flux-drive/phases/launch.md, skills/flux-drive/phases/launch-codex.md","design":"docs/plans/plan-clavain-2yx.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:14:38Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-3gb","title":"allowed-tools format varies across commands","description":"Some commands use array format for allowed-tools, others use different formatting. Standardize across all 24 commands.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:22Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-3ke","title":"P1: Normalize skill descriptions to \"Use when\" pattern","description":"- type: task","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T23:52:46Z","closed_at":"2026-02-07T23:52:46Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-3r1","title":"P0: Stale component counts across docs","description":"- type: bug","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T20:10:44Z","closed_at":"2026-02-07T20:10:44Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-3se","title":"Fix review agent count across 5 documentation surfaces (20/15 → 21)","description":"AGENTS.md:40, AGENTS.md:275, README.md:234, README.md:259, docs/plugin-audit.md:21 all show stale review agent counts. Actual is 21. Fix: 5 line edits. Source: flux-drive P0-1 (3 agents agree).","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:19:06Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-3t4","title":"P1: review.md overweight (455 lines) + stale .claude/skills/ paths","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-3w1x","title":"Split upstreams.json into config + state files","description":"Architecture: upstreams.json conflates static config (URLs, file maps, sync config) with mutable state (lastSyncedCommit). Every sync creates noisy diffs. Split into upstreams.json (config) + upstream-state.json (state, potentially gitignored).","notes":"Deferred by flux-drive review: adds two-source-of-truth complexity without proven need. Revisit after Python rewrite (Clavain-swio) proves stable.","status":"open","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:42.802960004-08:00","created_by":"mk","updated_at":"2026-02-11T21:32:53.139517506-08:00"}
{"id":"Clavain-460","title":"P1: engineering-docs XML tags contradict create-agent-skills guidance","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T23:52:46Z","closed_at":"2026-02-07T23:52:46Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-4728","title":"Consolidate upstream-check.sh API calls (24 to 12)","description":"Performance agent: 3 redundant gh api calls per upstream hit same commits endpoint with different --jq filters. Consolidate into 1 call with multi-field extraction. Saves ~2.4s and 50% rate limit. See docs/research/performance-review-of-clavain.md","notes":"Deferred by flux-drive review: micro-optimization (3→2 API calls, 6 upstreams). Ship after Python rewrite proves stable.","status":"open","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:29.722984077-08:00","created_by":"mk","updated_at":"2026-02-11T21:32:54.237474281-08:00"}
{"id":"Clavain-496k","title":"[fd] Diff slicing scattered across 4 files — consolidate into module","description":"From flux-drive self-review (2026-02-13).\n\nAgent: fd-architecture (1/4 convergence)\nSection: Agent Dispatch Architecture\nSeverity: P0\n\nDiff slicing logic spread across:\n1. config/flux-drive/diff-routing.md (patterns)\n2. phases/launch.md Step 2.1b (algorithm)\n3. phases/shared-contracts.md lines 84-88 (convergence adjustment)\n4. phases/synthesize.md lines 178-191 (reporting)\n\nOptions: (A) create slicing.md consolidating all logic, or (B) extract SlicingEngine abstraction with classify/build/adjust/report interface.\nReview output: docs/research/flux-drive/SKILL/fd-architecture.md","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-13T09:36:25.240565703-08:00","created_by":"mk","updated_at":"2026-02-13T09:36:25.240565703-08:00"}
{"id":"Clavain-4cqy","title":"flux-gen: add 'What NOT to Flag' and success criteria to template","description":"P1-1 and P1-2 from fd-prompt-engineering review. (1) Generated agents say 'don't duplicate core fd-* findings' but give no specifics about WHAT those agents catch. Need concrete exclusion lists per domain. (2) Generated agents have no success criteria — no way to self-calibrate quality. Core agents define what good looks like (e.g. fd-correctness 'Failure Narrative Method'). Fix: add 'What NOT to Flag' section and 'Success Criteria' section to the template.","notes":"'What NOT to Flag' section is done (flux-gen.md lines 115-123). Remaining: add 'Success Criteria' section to template — define what a good review looks like for generated agents.","status":"open","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T19:19:42.158312883-08:00","created_by":"mk","updated_at":"2026-02-13T00:02:53.552319041-08:00","dependencies":[{"issue_id":"Clavain-4cqy","depends_on_id":"Clavain-4jeg","type":"blocks","created_at":"2026-02-12T19:19:57.92089299-08:00","created_by":"mk"}]}
{"id":"Clavain-4jeg","title":"flux-gen template overhaul: personas, decision frameworks, review sequences","description":"P0-1 from fd-prompt-engineering review. Generated agents lack persona, voice, and decision heuristics. Core fd-* agents have distinct identities (e.g. fd-correctness: 'half data-integrity guardian, half concurrency bloodhound'). Generated agents get a topic list, not a reviewer identity. Fix: add persona line, review sequence directive, prioritization section to the template. Also addresses IMP-2 (replace generic 'How to Review' with domain-calibrated methodology) and IMP-3 (anti-overlap clauses).","notes":"Not started this session. Prior session completed domain profiles (Clavain-29cx). This bead is next priority — add persona, review sequences, prioritization to flux-gen.md template.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T19:19:38.699007107-08:00","created_by":"mk","updated_at":"2026-02-13T00:02:48.870889749-08:00","closed_at":"2026-02-13T00:02:48.870889749-08:00","close_reason":"All requirements met: persona lines in 23 agent specs across 11 domains, decision lens fields, v2 template with numbered review sections, anti-overlap clauses, domain-calibrated methodology, prioritization section, domain-specific doc types table."}
{"id":"Clavain-4pj","title":"Create mcp-server-design skill from agent-mail docs","description":"Thin skill that references agent-mail's GUIDE_TO_OPTIMAL_MCP_SERVER_DESIGN.md as canonical MCP server design reference. Uses context7/WebFetch to pull docs at runtime. Fills the 'build an MCP server from scratch' gap without duplicating content.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-4q1","title":"Move spec-flow-analyzer to own sub-table or rename Adaptive Reviewers table","status":"closed","priority":3,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:49Z","created_by":"mk","updated_at":"2026-02-09T15:18:44Z","closed_at":"2026-02-09T15:18:44Z","close_reason":"Consolidated into Clavain-th4"}
{"id":"Clavain-4u9","title":"flux-drive: Add YAML frontmatter validation (Phase 3)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:19Z","created_by":"mk","updated_at":"2026-02-08T14:32:03Z","closed_at":"2026-02-08T14:32:03Z","close_reason":"Added Step 3.0.5 with valid/malformed/missing classification and user-facing validation report"}
{"id":"Clavain-4us","title":"Agent Mail integration — auto-register and coordinate","description":"Clavain already has agent-mail-register.sh hook and agent-mail-coordination skill, but they're disconnected. Wire them: auto-register on session start (done), auto-reserve files when starting work on beads issues, auto-release on close, inject coordination context when multiple agents detected. The agent-mail MCP server in plugin.json should be conditional on the server running.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-4z1","title":"Pre-filter triage table to domain-relevant agents only","description":"The triage step (Phase 1, Step 1.2) currently scores all 19+ agents in the roster against the document profile. For a Python CLI tool, the orchestrator still scores go-reviewer, rust-reviewer, typescript-reviewer, shell-reviewer, data-migration-expert, deployment-verification-agent etc. — all of which will be 0. This wastes ~800 tokens of orchestrator context on zero-score rows. Fix: add a pre-filter step that eliminates obviously irrelevant agents before scoring. Use the document profile's Languages and Domains fields to skip agents whose domain has zero overlap. Only present the scoring table for agents that could plausibly score ≥1. Expected savings: ~300-500 tokens per run (minor, but free). Files: skills/flux-drive/SKILL.md (Step 1.2 scoring rules)","design":"docs/plans/plan-clavain-4z1.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:14:56Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-54o","title":"Add Codex dispatch path to flux-drive Phase 2","description":"Restructure Phase 2: Step 2.1 detect mode, Step 2.2 Task dispatch (existing), Step 2.3 Codex dispatch with path guards, mktemp, error handling, cleanup","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:08:16Z","created_by":"mk","updated_at":"2026-02-08T16:35:32Z","closed_at":"2026-02-08T16:35:32Z","close_reason":"Phase 2 restructured by Codex: Steps 2.0-2.3, Tier 2 bootstrap, error handling, cleanup","dependencies":[{"issue_id":"Clavain-54o","depends_on_id":"Clavain-fmu","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-563","title":"Add timeout to foreground retry in Step 2.3 (5 min cap)","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:39Z","created_by":"mk","updated_at":"2026-02-09T15:16:12Z","closed_at":"2026-02-09T15:16:12Z","close_reason":"Consolidated into Clavain-nta"}
{"id":"Clavain-578","title":"/work: delegate reviewer guidance to /quality-gates","description":"/work Phase 3 includes optional reviewer agents and example Task invocations that overlap heavily with /quality-gates. Remove reviewer-selection details from /work and replace with: 'If change is risky/large → run /quality-gates' and 'If user asks for external second opinion → run /interpeer quick'. Keep /work focused on execution discipline. Source: Oracle interpeer deep review Finding 3.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:18Z","created_by":"mk","updated_at":"2026-02-09T07:17:37Z","closed_at":"2026-02-09T07:17:37Z","close_reason":"Closed"}
{"id":"Clavain-5kd","title":"P1: JSON injection in agent-mail-register.sh heredoc","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-5kea","title":"Add pyramid-mode to flux-drive triage — overview scan before full read","description":"Inspired by StrongDM's Pyramid Summaries technique. Currently fd-* review agents read files uniformly. Add a two-pass review strategy: (1) compressed scan — function signatures, class names, symbol overview (2) selective expansion — only expand areas that triggered concern. This could cut context usage by 50%+ on large PRs. Implementation: modify flux-drive skill to add a pyramid triage phase before dispatching to review agents. Agents receive compressed summaries first, then request full bodies only for flagged symbols.","design":"docs/research/pyramid-mode-flux-drive.md","notes":"Flux-drive review complete (2026-02-11). 3/3 agents say: unify ContentSlice abstraction with diff slicing BEFORE implementing pyramid mode. 70% savings overstated (~59% system-wide after orchestrator cost). See docs/research/flux-drive/strongdm-techniques/summary.md for full findings.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:06:23.368341803-08:00","created_by":"mk","updated_at":"2026-02-11T12:27:04.613823127-08:00","closed_at":"2026-02-11T12:27:04.613823127-08:00","close_reason":"P1 beads completed in /lfg workflow"}
{"id":"Clavain-5o2","title":"P1: Differentiate or merge work vs execute-plan commands","description":"- type: task","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T23:53:46Z","closed_at":"2026-02-07T23:53:46Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-5o97","title":"Add /clavain:help with daily-driver commands first","description":"Oracle unique insight. List daily drivers first (brainstorm, write-plan, work, quality-gates, flux-drive, resolve, landing, interpeer). Include aliases. 1-2 usage examples per command. The missing discoverability primitive.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:38.564663966-08:00","created_by":"mk","updated_at":"2026-02-11T12:27:04.589460414-08:00","closed_at":"2026-02-11T12:27:04.589460414-08:00","close_reason":"P1 beads completed in /lfg workflow"}
{"id":"Clavain-5pl","title":"P1: AGENTS.md references nonexistent scripts/sync-upstreams.sh","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-62ek","title":"Orchestrator overhaul: enhanced scoring, adaptive slots, domain-aware expansion","description":"Rewrite triage scoring (0-7 scale with domain boost), adaptive slot allocation (4-12 agents), and domain-aware staged expansion with adjacency map.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:20.046254882-08:00","created_by":"mk","updated_at":"2026-02-12T15:23:58.430371096-08:00","closed_at":"2026-02-12T15:23:58.430371096-08:00","close_reason":"Implemented: 0-7 scoring scale, adaptive 4-12 slot allocation, domain adjacency map expansion algorithm","dependencies":[{"issue_id":"Clavain-62ek","depends_on_id":"Clavain-0uzm","type":"blocks","created_at":"2026-02-12T10:46:26.574865581-08:00","created_by":"mk"}]}
{"id":"Clavain-64o","title":"Smoke test GitHub PR command workflows and upstream review queue","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:26:06Z","created_by":"mk","updated_at":"2026-02-08T15:28:16Z","closed_at":"2026-02-08T15:28:16Z","close_reason":"Closed"}
{"id":"Clavain-690","title":"Surface per-agent completion ticks during 3-5 min wait","design":"docs/plans/plan-clavain-690.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:37Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-690","depends_on_id":"Clavain-8xs","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"},{"issue_id":"Clavain-690","depends_on_id":"Clavain-nta","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-6a4","title":"Slim agent system prompts for flux-drive context","description":"Review agents have system prompts ranging from 3K to 13K chars. When invoked by flux-drive, several sections are redundant: 1. The agent's native Output Format section is overridden by flux-drive's prompt template. 2. Personality/style instructions (e.g., concurrency-reviewer's 'British wit and Eastern-European directness') don't affect finding quality in structured output mode. 3. Verbose language-specific pattern libraries (concurrency-reviewer has 152 lines) could be condensed. Options: a) Add \u003c!-- flux-drive: skip --\u003e markers in agent .md files that the prompt constructor strips. b) Create separate flux-drive-optimized prompt variants (maintenance burden). c) Accept the cost — agent richness may occasionally produce better findings. Estimated savings: ~2-5K tokens per run across all agents. Files: agents/review/*.md, skills/flux-drive/phases/launch.md","design":"docs/plans/plan-clavain-6a4.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:15:16Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-6czs","title":"F1: Beads-Based Work Scanner","description":"/lfg no-args scans open beads, sorts by priority/recency/staleness, shows recommended next actions","notes":"Plan: docs/plans/2026-02-12-work-discovery.md","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:42.834442471-08:00","created_by":"mk","updated_at":"2026-02-12T13:09:46.11847471-08:00","closed_at":"2026-02-12T13:09:46.11847471-08:00","close_reason":"M1 F1 implemented: work discovery scanner library, 21 bats tests, quality gates passed","dependencies":[{"issue_id":"Clavain-6czs","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.097003522-08:00","created_by":"mk"}]}
{"id":"Clavain-6f7","title":"Fix setup.md phantom /clavain:tool-time reference","description":"commands/setup.md:144 references /clavain:tool-time but tool-time is a separate plugin (tool-time:tool-time). Remove the clavain: prefix or replace with correct namespace. Source: flux-drive P2-18.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:04Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-6fi","title":"Create agent-deployment skill","description":"Deployment patterns for agent apps: Docker, Fly.io, Railway, AWS Lambda, Cloudflare. References agent-mail's deployment_samples/ (cloudflare-pages-example.toml, github-actions-share.yml). Thin shim, not templates.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-6mxp","title":"Fix component counts to 33 skills, 16 agents, 26 commands across all docs","description":"Quality agent found actual command count is 26 (model-routing added without doc update). Multiple surfaces disagree: using-clavain says 34/23, AGENTS.md says 33/25, plugin.json says 33/25. Fix in: using-clavain/SKILL.md, plugin.json, agent-rig.json, AGENTS.md, README.md, CLAUDE.md. See docs/research/quality-consistency-review-of-clavain.md","notes":"Plan complete. 11 edits across 6 files + marketplace repo. Actual command count is 28 (not 26 as originally thought — 2 more commands exist). See plan agent output.","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:20:49.591345918-08:00","created_by":"mk","updated_at":"2026-02-11T08:01:39.68121895-08:00","closed_at":"2026-02-11T08:01:39.68121895-08:00","close_reason":"All 10 count edits applied: 33 skills, 16 agents, 28 commands across AGENTS.md, CLAUDE.md, README.md, agent-rig.json, using-clavain/SKILL.md. Verified with grep — no stale counts remain."}
{"id":"Clavain-6ue","title":"P1: Dual upstream sync systems undocumented","description":"- type: task","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T23:53:46Z","closed_at":"2026-02-07T23:53:46Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-6vp","title":"P1: Broad Bash tool access in sync.yml — narrow to read-only git ops","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-6xd","title":"Update AGENTS.md scripts/ tree and .github/workflows/ tree to match disk","description":"AGENTS.md:53-54 shows only upstream-check.sh in scripts/ but dispatch.sh, debate.sh, install-codex.sh, upstream-impact-report.py also exist. Workflows tree shows 4 of 8. README shows 2 of 8. Source: flux-drive P1-2, P1-3.","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:17Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-72c","title":"Add setup, compound, interpeer to routing tables","description":"3 commands appear only in Quick Reference, not in the 3-layer routing tables. setup→Meta, compound→Ship, interpeer→Review. Source: flux-drive P1-7 (3 agents agree).","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:29Z","created_by":"mk","updated_at":"2026-02-09T00:36:31Z","closed_at":"2026-02-09T00:36:31Z","close_reason":"Added setup→Meta, compound→Ship, interpeer→Review in Layer 1 routing tables."}
{"id":"Clavain-733","title":"Add \u003cexample\u003e blocks to 5 fd-* agents","description":"fd-architecture, fd-code-quality, fd-performance, fd-security, fd-user-experience lack the \u003cexample\u003e+\u003ccommentary\u003e blocks required by AGENTS.md convention. All other 24 agents have them. Source: flux-drive P1-5 (2 agents agree).","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:27Z","created_by":"mk","updated_at":"2026-02-09T00:36:31Z","closed_at":"2026-02-09T00:36:31Z","close_reason":"Added \u003cexample\u003e blocks to all 5 fd-* agents. YAML validated."}
{"id":"Clavain-752","title":"flux-drive: Validate Phase 4 Oracle escalation code paths","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:24Z","created_by":"mk","updated_at":"2026-02-08T14:30:01Z","closed_at":"2026-02-08T14:30:01Z","close_reason":"Added fallback Oracle detection, timeout+error handling for Oracle CLI, and splinterpeer availability check"}
{"id":"Clavain-75h","title":"P1: work.md and review.md contain branch/worktree refs violating trunk policy","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-75u","title":"P0: Hook count mismatch — docs say '2 hooks' but 3 scripts across 2 events","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:25Z","created_by":"mk","updated_at":"2026-02-08T00:36:15Z","closed_at":"2026-02-08T00:36:15Z","close_reason":"Closed"}
{"id":"Clavain-7aei","title":"Remove 3 vestigial redirect skills (prompterpeer, winterpeer, splinterpeer)","description":"These 3-line stubs just redirect to interpeer modes. They inflate skill count from 30 to 33 with zero functionality. Remove them, add their names as keywords in interpeer description for backward discovery. See docs/research/ux-product-review-of-clavain.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:17.48279385-08:00","created_by":"mk","updated_at":"2026-02-11T10:46:17.792857938-08:00","closed_at":"2026-02-11T10:46:17.792857938-08:00","close_reason":"All 4 P1 quick wins landed: jq guard in both Stop hooks, 3 redirect skills removed (30 skills now), /clavain:setup hint in SessionStart, EXTREMELY-IMPORTANT block replaced with professional tone. 485 tests pass."}
{"id":"Clavain-7dfy","title":"[fd] SKILL.md 546 lines — extract scoring examples + roster to references/","description":"From flux-drive self-review (2026-02-13).\n\nAgent: fd-quality (1/4 convergence)\nSection: SKILL.md\nSeverity: P0\n\nSKILL.md is 5.4x the recommended plugin convention (~100 lines). Extract:\n- Scoring examples (lines 329-385, 57 lines) → references/scoring-examples.md\n- Agent roster (lines 450-508, 59 lines) → references/agent-roster.md\n- Triage guide (lines 387-391) → references/triage-guide.md\n\nTarget: reduce SKILL.md to ~100-120 lines of core router logic.\nReview output: docs/research/flux-drive/SKILL/fd-quality.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-13T09:36:20.978303053-08:00","created_by":"mk","updated_at":"2026-02-13T14:40:48.627964371-08:00","closed_at":"2026-02-13T14:40:48.627964371-08:00","close_reason":"Extracted scoring examples (63 lines) to references/scoring-examples.md and agent roster (60 lines) to references/agent-roster.md. SKILL.md reduced from 541→430 lines (22% reduction). All 699 structural + 76 shell tests pass."}
{"id":"Clavain-7e2","title":"flux-drive: Fix stale integration claims + add qmd (Integration)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:22Z","created_by":"mk","updated_at":"2026-02-08T14:30:25Z","closed_at":"2026-02-08T14:30:25Z","close_reason":"Removed stale writing-plans/brainstorming claims, added qmd to Step 1.0 and See Also"}
{"id":"Clavain-7l4","title":"P0: AGENTS.md falsely claims 'only SessionStart hook' — SessionEnd exists","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:25Z","created_by":"mk","updated_at":"2026-02-08T00:36:15Z","closed_at":"2026-02-08T00:36:15Z","close_reason":"Closed"}
{"id":"Clavain-7mpd","title":"Domain-aware flux-drive: domain profiles, fd-game-design agent, orchestrator overhaul, token optimizations","description":"Make flux-drive adaptable to project domains. Three channels: (1) dynamic injection of domain-specific review criteria into core agents, (2) /flux-gen command to generate project-specific agents, (3) new fd-game-design core plugin agent. Includes 11 curated domain profiles, orchestrator overhaul (enhanced scoring, adaptive 4-12 agent slots, domain-aware expansion), and token optimizations (O3 file reference, O1 universal slicing, O4 output compression, O5 conditional knowledge). Brainstorm: docs/brainstorms/2026-02-12-domain-aware-flux-drive-brainstorm.md","notes":"Domain injection wired into runtime. Step 2.1a in launch.md loads domain profiles, extracts per-agent criteria, injects as Domain Context in prompt template. Multi-domain (up to 3, ordered by confidence). fd-game-design added to knowledge keywords. SKILL.md updated to document full detection→scoring→injection pipeline. Remaining: /flux-gen command (Clavain-8l91), publish.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:45:52.212720812-08:00","created_by":"mk","updated_at":"2026-02-12T15:12:48.035178125-08:00","closed_at":"2026-02-12T15:12:48.035178125-08:00","close_reason":"Core feature complete: 11 domain profiles populated (330 review criteria), detect-domains.py (265 lines, 32 tests), runtime injection wired (Step 2.1a + Domain Context prompt section), fd-game-design agent, /flux-gen command. P2 follow-ups remain open: orchestrator overhaul (62ek), token optimizations (i1u6)."}
{"id":"Clavain-7nk","title":"Create 6 core v2 agent files","description":"Create agents/review/fd-v2-{architecture,safety,correctness,quality,user-product,performance}.md by merging 19 specialized agents into 6 core agents per the v2 architecture doc.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:17Z","created_by":"mk","updated_at":"2026-02-10T09:54:04Z","closed_at":"2026-02-10T09:54:04Z","close_reason":"Closed"}
{"id":"Clavain-7ns","title":"Modpack manifest — define Clavain's required/recommended plugin list","description":"Clavain should declare which plugins it expects to be installed and how they integrate. Create a modpack manifest (e.g. modpack.json or section in AGENTS.md) listing: required plugins (context7, agent-mail, beads hooks), recommended plugins (agent-sdk-dev, interclode, interpeer, gurgeh-plugin), and optional plugins (serena, supabase, vercel). Include version constraints and conflict detection (e.g. hookify OFF because Clavain manages hooks directly).","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T01:16:26Z","closed_at":"2026-02-08T01:16:26Z","close_reason":"Modpack manifest added to AGENTS.md — required/recommended/infrastructure/conditional/conflicts sections.","dependencies":[{"issue_id":"Clavain-7ns","depends_on_id":"Clavain-82g","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-7p2","title":"Resolve output format strategy: native YAML vs markdown Findings Index","description":"Two competing approaches to the output format problem exist: 1. Clavain-27u proposes replacing YAML frontmatter with rigid markdown Findings Index + central findings.json (from 3-model debate consensus). 2. The flux-drive architecture evaluation (docs/research or brain artifact) recommends the opposite: make YAML frontmatter the native format in all review agent .md files, eliminating the 50-line Output Format Override block from the prompt template. Both solve the same problem (the override conflict between agent native format and flux-drive format), but in different directions. Clavain-27u centralizes structured output at the orchestrator. Native YAML pushes it to agents. Decision needed: which approach better suits the overall system? Consider: token cost (native YAML saves ~2K/run in override instructions), agent reusability (agents used outside flux-drive need their own format), maintenance (one format vs two). This bead should be resolved before implementing either Clavain-27u or the native YAML approach.","design":"docs/plans/plan-clavain-7p2.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:15:30Z","created_by":"mk","updated_at":"2026-02-10T08:21:16Z","closed_at":"2026-02-10T08:21:16Z","close_reason":"Decision: Option C (Hybrid). Agents keep native prose format. Flux-drive prepends YAML frontmatter via a slimmed override (~15 lines instead of ~50). Agents work standalone AND in flux-drive. No agent file changes needed. Unblocks Clavain-27u which should be updated to implement the hybrid approach."}
{"id":"Clavain-7qpj","title":"Add clodex behavioral smoke test","description":"Smoke test that validates Claude respects the clodex behavioral contract. Setup: create clodex-toggle.flag, start session, prompt 'add a retry timeout to handler.go'. Expected: Claude suggests /clodex dispatch or asks to toggle off, does NOT use Edit/Write on source files. Add to tests/smoke/ alongside existing smoke tests. Requires a real Claude Code session (model:haiku, max_turns:3).","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:50:48.485835993-08:00","created_by":"mk","updated_at":"2026-02-12T21:01:24.707495113-08:00","closed_at":"2026-02-12T21:01:24.707495113-08:00","close_reason":"Smoke test Part 4 added with test #26 (clodex-behavioral-compliance), --include-clodex flag added to runner"}
{"id":"Clavain-7t5","title":"Add run_in_background: true to /review command agent dispatch","description":"commands/review.md launches 6+ agents in Phase 2 but never specifies run_in_background: true. flux-drive and quality-gates both require it. Without it, agent output floods the main conversation context. Source: flux-drive P1-14.","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:14Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-80p","title":"Interpeer + Oracle integration — cross-AI review routing","description":"Clavain has oracle-review skill and interpeer is installed, but routing is manual. Add to flux-drive and /review: when Oracle available, automatically include GPT-5.2 perspective alongside Clavain's agent roster. Detect Oracle availability (DISPLAY=:99, chrome wrapper) at session start.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T08:33:46Z","closed_at":"2026-02-08T08:33:46Z","close_reason":"Closed"}
{"id":"Clavain-82g","title":"Plugin audit — disable redundant plugins, document rationale","description":"Audit all 32 enabled plugins against Clavain's capabilities. Disable ~6 redundant official plugins (code-review, code-simplifier, commit-commands, feature-dev, claude-md-management, frontend-design). Evaluate tldrs, tldr-swinton, tuivision, explanatory-output-style for removal. Document keep/disable rationale in modpack manifest. This should be done as part of or before Clavain-7ns (modpack manifest).","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:09:52Z","created_by":"mk","updated_at":"2026-02-08T01:14:37Z","closed_at":"2026-02-08T01:14:37Z","close_reason":"Audit complete. 8 redundant plugins disabled, explanatory-output-style kept per user preference. See docs/plugin-audit.md."}
{"id":"Clavain-89m5","title":"F4: Session-Start Light Scan","description":"1-2 line work state summary in session-start hook. 60s TTL cache. Shows open count + highest-priority item.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:46.288402943-08:00","created_by":"mk","updated_at":"2026-02-13T12:03:21.864439413-08:00","closed_at":"2026-02-13T12:03:21.864439413-08:00","close_reason":"F4 brief scan shipped in interphase 0.2.0 + Clavain 0.5.9","dependencies":[{"issue_id":"Clavain-89m5","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.269730893-08:00","created_by":"mk"},{"issue_id":"Clavain-89m5","depends_on_id":"Clavain-6czs","type":"blocks","created_at":"2026-02-12T11:02:04.353647435-08:00","created_by":"mk"}]}
{"id":"Clavain-8l91","title":"Create /flux-gen command","description":"New command that generates project-specific fd-* agents in .claude/agents/ based on detected domain profiles. Uses Agent Specifications section from domain profiles.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:20.146858837-08:00","created_by":"mk","updated_at":"2026-02-12T15:12:32.11792284-08:00","closed_at":"2026-02-12T15:12:32.11792284-08:00","close_reason":"Created commands/flux-gen.md: detects domains, reads Agent Specifications from profiles, generates .claude/agents/fd-*.md files with proper review prompts. Skip-existing by default, overwrite option. Count bumped to 37 across all references. 627 tests pass.","dependencies":[{"issue_id":"Clavain-8l91","depends_on_id":"Clavain-cl34","type":"blocks","created_at":"2026-02-12T10:46:26.648680271-08:00","created_by":"mk"},{"issue_id":"Clavain-8l91","depends_on_id":"Clavain-0uzm","type":"blocks","created_at":"2026-02-12T10:46:26.708254128-08:00","created_by":"mk"}]}
{"id":"Clavain-8mm3","title":"[fd] Update stale PreToolUse/autopilot references across docs and tests","description":"From flux-drive review of joyful-wondering-seal (2026-02-12).\n\nAgents: fd-architecture (P1-2, P1-3, P1-1), fd-quality (P1-3)\nConvergence: 2/4 agents\n\nPlan updates 2 docs but 15+ files reference PreToolUse hook or autopilot.sh: AGENTS.md, README.md, CLAUDE.md (hook counts 5→4), research docs, skills. Also missing test updates — need regression guard asserting no PreToolUse in hooks.json, test for session-start clodex injection.\n\nCovers: stale docs (P1-2), hook count (P1-3), test updates (P1-1), replacement text for behavioral-contract.md (P1-2 from fd-prompt-engineering).\n\nReview output: docs/research/flux-drive/joyful-wondering-seal/","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:23:57.650616711-08:00","created_by":"mk","updated_at":"2026-02-12T20:42:36.973581373-08:00","closed_at":"2026-02-12T20:42:36.973581373-08:00","close_reason":"Addressed: Updated AGENTS.md, README.md, CLAUDE.md hook counts (5→4), removed all PreToolUse/autopilot references from active files. Added 3 regression tests: no-PreToolUse guard, expected event types, session-start clodex injection."}
{"id":"Clavain-8t5l","title":"Add shared sentinel between Stop hooks to prevent compound-after-handoff loop","description":"auto-compound.sh and session-handoff.sh can create loops: handoff commits, compound detects commit, fires again. Add shared /tmp/clavain-stop-orchestrated-SESSION_ID sentinel or merge into single script. See docs/research/architecture-review-of-clavain.md","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:18.414144757-08:00","created_by":"mk","updated_at":"2026-02-11T17:29:03.562142361-08:00","closed_at":"2026-02-11T17:29:03.562142361-08:00","close_reason":"Sentinel implemented, tests pass"}
{"id":"Clavain-8xs","title":"Add universal completion protocol: atomic rename + run scoping","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:31Z","created_by":"mk","updated_at":"2026-02-09T15:16:12Z","closed_at":"2026-02-09T15:16:12Z","close_reason":"Consolidated into Clavain-nta"}
{"id":"Clavain-95h","title":"P1: Rails content in general-purpose agents","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T23:52:46Z","closed_at":"2026-02-07T23:52:46Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-99t","title":"Fix README flux-drive roster claim (28 agents → actual 19 fixed)","description":"README.md:58 says flux-drive pulls from a roster of 28 agents across 4 tiers but the fixed roster is 19 (5 T1 + 13 T3 + 1 T4). Tier 2 is dynamic. Rewrite to accurately describe tiered selection. Source: flux-drive P1-4.","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:20Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-9tiv","title":"F7: Tiered Gate Enforcement","description":"P0/P1 hard gates (--skip-gate --reason required), P2/P3 soft gates (warning only), P4 no gates. Stale review detection via git log.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:52.268290269-08:00","created_by":"mk","updated_at":"2026-02-13T15:03:05.50860801-08:00","closed_at":"2026-02-13T15:03:05.50860801-08:00","close_reason":"Shipped in interphase 0.3.0","dependencies":[{"issue_id":"Clavain-9tiv","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.443951274-08:00","created_by":"mk"},{"issue_id":"Clavain-9tiv","depends_on_id":"Clavain-021h","type":"blocks","created_at":"2026-02-12T11:02:04.406349663-08:00","created_by":"mk"}]}
{"id":"Clavain-9tq","title":"Fast-follow deferred flux-drive v2 features (8 items)","description":"Deferred doc: docs/research/flux-drive-v2-deferred.md. Eight independently shippable features cut from v2 MVP, each with trigger conditions: (1) Two-tier knowledge — trigger: 20+ reviews, \u003e30% single-project entries. (2) Ad-hoc agent generation — trigger: roster gaps. Note: Oracle flagged prompt injection risk for in-repo agent storage. (3) Async deep-pass — trigger: 50+ reviews. (4) Agent graduation pipeline — depends on two-tier. (5) Complex frontmatter — trigger: qmd precision issues. (6) Dynamic agent cap — trigger: cost data. (7) 7th agent Reliability/Deploy — trigger: ops review gaps (Oracle recommendation). (8) Claim-level convergence — trigger: low-resolution convergence at 6 agents (Oracle recommendation).","status":"open","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T08:52:06Z","created_by":"mk","updated_at":"2026-02-10T08:52:06Z","dependencies":[{"issue_id":"Clavain-9tq","depends_on_id":"Clavain-urz","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-9xj","title":"Downgrade sync.yml Codex sandbox from danger-full-access to workspace-write","description":"sync.yml:84 runs Codex with --sandbox danger-full-access granting unrestricted filesystem+network. Auth.json is readable. Clone upstreams in a separate shell step, then run Codex with workspace-write. Source: flux-drive SEC-2 (HIGH).","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:03Z","created_by":"mk","updated_at":"2026-02-09T00:14:37Z","closed_at":"2026-02-09T00:14:37Z","close_reason":"sync.yml now clones upstreams in separate step, Codex runs with workspace-write instead of danger-full-access."}
{"id":"Clavain-9yc","title":"Create Tier 2 bootstrap template and staleness check","description":"New template at skills/clodex/templates/create-review-agent.md. Add sha256sum staleness check and blocking bootstrap dispatch to flux-drive Phase 2","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:08:18Z","created_by":"mk","updated_at":"2026-02-08T16:30:27Z","closed_at":"2026-02-08T16:30:27Z","close_reason":"create-review-agent.md bootstrap template created by Codex, verified","dependencies":[{"issue_id":"Clavain-9yc","depends_on_id":"Clavain-54o","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-a3hp","title":"F2: AskUserQuestion Discovery UI","description":"Present discovery results via AskUserQuestion with top-ranked item as recommended default. User hits Enter to proceed.","notes":"Plan: docs/plans/2026-02-12-work-discovery.md","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:43.835934226-08:00","created_by":"mk","updated_at":"2026-02-12T13:09:46.170665488-08:00","closed_at":"2026-02-12T13:09:46.170665488-08:00","close_reason":"M1 F2 implemented: AskUserQuestion UI in lfg.md, integrated with discovery scanner","dependencies":[{"issue_id":"Clavain-a3hp","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.154364149-08:00","created_by":"mk"},{"issue_id":"Clavain-a3hp","depends_on_id":"Clavain-6czs","type":"blocks","created_at":"2026-02-12T11:02:04.255904947-08:00","created_by":"mk"}]}
{"id":"Clavain-a3o","title":"Add upstream impact reporting and decision gate","notes":"Implementing upstream-impact workflow, decision-gate workflow, decision template, and runbook/AGENTS updates for human intervention on meaningful upstream changes.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:56:19Z","created_by":"mk","updated_at":"2026-02-08T17:02:10Z","closed_at":"2026-02-08T17:02:10Z","close_reason":"Completed: added upstream impact workflow, decision gate, decision record template, and documented intervention flow"}
{"id":"Clavain-a5v","title":"Switch GitHub workflows to Codex auth-json (no API key)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:44:35Z","created_by":"mk","updated_at":"2026-02-08T15:44:40Z","closed_at":"2026-02-08T15:44:40Z","close_reason":"Closed"}
{"id":"Clavain-aab","title":"Complete README disabled-conflicts table (add 3 missing plugins)","description":"README.md:232-238 lists only 5 of 8 disabled plugins. Missing: claude-md-management, frontend-design, hookify. These are correctly listed in AGENTS.md and using-clavain. Fix: add 3 rows. Source: flux-drive P0-3.","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:19:09Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-add","title":"Skills with approval gates: use AskUserQuestion tool","description":"Skills with user-approval gates should use the AskUserQuestion tool for structured interaction instead of inline text. Fixed: interpeer deep mode, flux-drive Step 1.3, clodex Step 1, landing-a-change Step 4. Verify no other skills need this pattern. Source: smoke test during interpeer deep review.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:34Z","created_by":"mk","updated_at":"2026-02-09T07:08:43Z","closed_at":"2026-02-09T07:08:43Z","close_reason":"Fixed in this session: interpeer deep, flux-drive Step 1.3, clodex Step 1, landing-a-change Step 4 all now use AskUserQuestion tool for approval gates."}
{"id":"Clavain-amz","title":"Template Step 3.5 synthesis report with same rigor as agent prompt template","design":"docs/plans/plan-clavain-amz.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:40Z","created_by":"mk","updated_at":"2026-02-10T08:51:44Z","closed_at":"2026-02-10T08:51:44Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-amz","depends_on_id":"Clavain-27u","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-apn","title":"Refactor launch-codex.md: extract shared contracts, keep only Codex-specific mechanics","description":"From debate consensus (Codex + Oracle agreed: keep but refactor as adapter). Extract shared contracts, keep Codex-specific mechanics only.\n\nDepends on Clavain-27u (Findings Index) because shared output format must be defined first.\n\nAcceptance criteria:\n1. Extract shared spec file (output format, completion signal, retry logic) referenced by both launch.md and launch-codex.md\n2. Shrink launch-codex.md to Codex-only: bootstrap, sandbox flags, dispatch invocation\n3. Fix the fallback: make it an orchestrator decision, not a bash variable (Oracle's insight — current CLODEX_MODE=false in bash doesn't update orchestrator control flow)\n4. Move shared prompt contract to shared spec\n\nFiles: skills/flux-drive/phases/launch.md, skills/flux-drive/phases/launch-codex.md, new shared spec file","design":"docs/plans/plan-clavain-apn.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:45Z","created_by":"mk","updated_at":"2026-02-10T08:51:44Z","closed_at":"2026-02-10T08:51:44Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-apn","depends_on_id":"Clavain-27u","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-ast","title":"SessionStart hook: auto-detect and configure companion plugins","description":"Extend session-start.sh to detect installed companion plugins and inject integration context. E.g.: if interclode installed, inject codex-first dispatch path; if beads .beads/ dir exists, inject bd prime context; if agent-mail running, inject coordination patterns. Currently each tool is siloed — the hook should wire them together.","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T01:16:26Z","closed_at":"2026-02-08T01:16:26Z","close_reason":"SessionStart hook now auto-detects interclode, beads, agent-mail, gurgeh, oracle and injects companion context."}
{"id":"Clavain-azd","title":"P1: engineering-docs overweight (489 lines) — extract to sub-files","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-azlo","title":"Narrow auto-compound triggers + add per-repo opt-out","description":"Auto-compound fires on every git commit including routine ones during /work. Narrow: only fire when resolution+commit co-occur. Add opt-out flags: .claude/clavain.no-autocompound, .claude/clavain.quiet. Add throttle: at most once per N minutes. See UX review + Oracle.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:21.372111978-08:00","created_by":"mk","updated_at":"2026-02-11T17:31:54.896770347-08:00","closed_at":"2026-02-11T17:31:54.896770347-08:00","close_reason":"Threshold raised, signals pruned, opt-out and throttle added, all tests pass","dependencies":[{"issue_id":"Clavain-azlo","depends_on_id":"Clavain-8t5l","type":"blocks","created_at":"2026-02-11T17:09:50.126900108-08:00","created_by":"mk"}]}
{"id":"Clavain-b683","title":"Auto-inject past solutions into /lfg execute phase via learnings-researcher","description":"Inspired by StrongDM's Gene Transfusion technique. Currently learnings-researcher is opt-in — you have to know to call it. In the /lfg execute phase, automatically search docs/solutions/ and config/flux-drive/knowledge/ for relevant past solutions before writing code. This turns institutional knowledge from passive archive into active exemplar injection. Implementation: add a learnings-research step to the lfg execute phase, between plan approval and code writing.","design":"docs/research/auto-inject-learnings-lfg.md","notes":"Flux-drive review complete (2026-02-11). 3/3 agents recommend Option B (wire into write-plan) over Option A (lfg step 4.5). Don't mutate plan file after flux-drive review. Gate on docs/solutions/ having \u003e=5 files. Ship this first — lowest risk of the three.","status":"open","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:06:26.359480825-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.672846107-08:00"}
{"id":"Clavain-b6n","title":"Modpack installer command — /clavain:setup","description":"Create a /setup command that: 1) installs required companion plugins from marketplace, 2) disables conflicting official plugins, 3) configures settings.json hooks for beads/dotfiles, 4) verifies MCP servers (agent-mail, context7), 5) runs initial bd init if beads not configured. One command to go from fresh Claude Code install to fully configured rig.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T08:33:46Z","closed_at":"2026-02-08T08:33:46Z","close_reason":"Closed"}
{"id":"Clavain-b8o","title":"P1: flux-drive hardcodes gurgeh-plugin with no fallback","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-b9j","title":"Interclode integration — codex-first as native mode","description":"Codex-first mode currently requires manual /clodex toggle and dispatch.sh path resolution. Make it native: detect interclode plugin path at session start, cache dispatch.sh location, expose codex-first toggle in modpack config, auto-dispatch for suitable tasks when mode is on. Currently scattered across 3 skills (codex-first, codex-first-dispatch, codex-delegation) — unify the entry point.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-ba3","title":"P1: Fix typos in resolve commands","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T22:44:30Z","closed_at":"2026-02-07T22:44:30Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-ba6","title":"P1: engineering-docs has 3 duplicate heading pairs from XML conversion","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-bp8","title":"Close the gap between aspirational workflow and actual usage","description":"Insights data shows actual daily usage is dominated by rapid build-fix cycles (47/97 sessions), 50% unclear outcomes from incomplete sessions, and minimal parallelization (4%). The blog post describes a disciplined 5-phase sprint. These beads close the gap by adding automation for the most common workflows, addressing friction points, and filling missing pipeline stages.","status":"closed","priority":1,"issue_type":"epic","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:35:39Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:12:02.069228729-08:00","closed_at":"2026-02-11T01:12:02.069228729-08:00","close_reason":"All 7 children complete: fixbuild, session-handoff, model-routing, strategy, auto-compound tuning, smoke-test, codex-dispatch-in-plans","labels":["insights-gap"]}
{"id":"Clavain-bp8.1","title":"Add /fixbuild command — lightweight build-error fast path","description":"Most frequent workflow: 47/97 analyzed sessions are fix_build_error. Current systematic-debugging skill is heavyweight (4 phases, 297 lines) — designed for hard bugs, not type errors. Add /fixbuild command: run build, capture error, read failing file(s), apply fix, re-run build, loop until green or 5 attempts, then escalate to systematic-debugging.","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:35:54Z","created_by":"mistakeknot","updated_at":"2026-02-11T00:42:49.873623045-08:00","closed_at":"2026-02-11T00:42:49.873623045-08:00","close_reason":"Closed","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.1","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:35:54Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.2","title":"Add SessionEnd handoff hook — auto-save progress on session exit","description":"Insights #1 friction point: sessions ending before completion, outcomes unclear in 50% of cases. Add a SessionEnd hook that writes HANDOFF.md with what was accomplished, what's pending, next steps; updates relevant beads with current status; runs bd sync. Triggers automatically even when user doesn't explicitly land.","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:03Z","created_by":"mistakeknot","updated_at":"2026-02-11T00:42:49.8867373-08:00","closed_at":"2026-02-11T00:42:49.8867373-08:00","close_reason":"Closed","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.2","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:02Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.3","title":"Add model routing for subagents — stop defaulting everything to Opus","description":"All 16 agents use model: inherit. Insights show almost exclusive Opus usage. Blog post says pick the cheapest model. Add routing: research agents → haiku, review agents → sonnet, planning/brainstorming → opus. Biggest single token efficiency win available.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:11Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:00:32.333337312-08:00","closed_at":"2026-02-11T01:00:32.333337312-08:00","close_reason":"Closed","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.3","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:11Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.4","title":"Add /strategy command — fill the gap between brainstorm and plan","description":"Blog post describes a Strategy phase between Brainstorming and Planning. Clavain jumps from /brainstorm straight to /write-plan. Add /strategy: takes brainstorm doc as input, creates/updates PRD, creates/updates roadmap, creates beads from PRD features, runs flux-drive on PRD. Also update /lfg pipeline to include this step.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:20Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:05:00.408519704-08:00","closed_at":"2026-02-11T01:05:00.408519704-08:00","close_reason":"Added /strategy command (brainstorm→PRD→beads→validate→handoff), updated lfg.md lifecycle from 7→9 steps","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.4","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:19Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.5","title":"Tune auto-compound hook thresholds — lower detection bar","description":"auto-compound.sh detects signals like 'that worked' and git commits, but 50% unclear outcomes suggests it's not triggering enough. Add build-success-after-failure signal, file-edits-resolving-test-failure signal, high-bash-count signal (\u003e10 commands). Consider making compound less optional for non-trivial sessions.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:29Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:09:44.401549758-08:00","closed_at":"2026-02-11T01:09:44.401549758-08:00","close_reason":"Weighted signal detection (8 signals, threshold\u003e=2), expanded transcript window (40→80 lines), new signals: recovery, high-activity, error-fix-cycle","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.5","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:28Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.6","title":"Add /smoke-test command — connect browser automation to sprint pipeline","description":"22K browser automation calls is second-most-used tool. Clavain has no skill or command for opening the app and clicking through it. Add /smoke-test: launch local dev server, open app via claude-in-chrome, walk through critical user journeys from PRD, report results. Wire into /work pipeline as post-execution step.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:38Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:10:49.547876393-08:00","closed_at":"2026-02-11T01:10:49.547876393-08:00","close_reason":"Added /smoke-test command — auto-detects dev server or TUI app, walks user journeys from PRD/plan, reports pass/fail","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.6","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:38Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-bp8.7","title":"Wire Codex dispatch into executing-plans for automatic parallelization","description":"Insights show only 4% multi-clauding. Blog post describes heavy parallelization. Clavain has /clodex and dispatch.sh but they require manual activation. executing-plans already batches tasks in groups of 3 — wire it to dispatch to Codex when clodex mode is active instead of running serially.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@vibeguider.org","created_at":"2026-02-11T07:36:47Z","created_by":"mistakeknot","updated_at":"2026-02-11T01:11:57.440520971-08:00","closed_at":"2026-02-11T01:11:57.440520971-08:00","close_reason":"Wired Codex dispatch into executing-plans — auto-detects clodex mode, classifies tasks (independent/sequential/exploratory), dispatches parallel batches of up to 5 agents","labels":["insights-gap"],"dependencies":[{"issue_id":"Clavain-bp8.7","depends_on_id":"Clavain-bp8","type":"parent-child","created_at":"2026-02-10T23:36:47Z","created_by":"mistakeknot","metadata":"{}"}]}
{"id":"Clavain-c2d","title":"Add codex-refresh automation and runbook pointers","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:00:04Z","created_by":"mk","updated_at":"2026-02-08T15:01:12Z","closed_at":"2026-02-08T15:01:12Z","close_reason":"Closed"}
{"id":"Clavain-c3f","title":"P0: Upstream sync prompt injection — no CODEOWNERS or branch protection","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:25Z","created_by":"mk","updated_at":"2026-02-08T00:36:15Z","closed_at":"2026-02-08T00:36:15Z","close_reason":"Closed"}
{"id":"Clavain-c6m","title":"Add 1-sentence description to interpeer quick mode suggestion in Step 4.1","status":"closed","priority":4,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:58:00Z","created_by":"mk","updated_at":"2026-02-09T15:16:50Z","closed_at":"2026-02-09T15:16:50Z","close_reason":"Absorbed into Clavain-ne6 as acceptance criteria","dependencies":[{"issue_id":"Clavain-c6m","depends_on_id":"Clavain-ne6","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-c7i","title":"Replace auto-chain to interpeer mine mode with explicit user consent","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:46Z","created_by":"mk","updated_at":"2026-02-09T15:16:50Z","closed_at":"2026-02-09T15:16:50Z","close_reason":"Absorbed into Clavain-ne6 as acceptance criteria","dependencies":[{"issue_id":"Clavain-c7i","depends_on_id":"Clavain-ne6","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-c9gv","title":"Add lightweight document-review for quick pre-planning polish","description":"Compound-engineering added document-review skill for refining brainstorm/plan docs. Clavain has flux-drive (comprehensive multi-agent) but no quick single-pass review. Position as quick polish before /strategy, cap at 2 iterations.","notes":"Plan: docs/plans/Clavain-c9gv-document-review.md","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:11.126586153-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.116639346-08:00","closed_at":"2026-02-11T12:04:49.116639346-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-ckz2","title":"Extract domain detection from SKILL.md prompt into deterministic Python script","description":"Step 1.0a's signal gathering + weighted scoring is currently prompt-engineered (LLM executes filesystem checks and arithmetic each run). Extract the deterministic parts into scripts/detect-domains.py: parse index.yaml, gather dir/file/framework/keyword signals, compute weighted scores, read/write cache. Keep LLM fallback (zero-signal inference) and domain bonus scoring as prompt instructions. Reduces ~10 tool calls to 1, makes scoring reproducible and testable.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T14:07:24.968001716-08:00","created_by":"mk","updated_at":"2026-02-12T14:55:19.000423882-08:00","closed_at":"2026-02-12T14:55:19.000423882-08:00","close_reason":"Completed in prior session: scripts/detect-domains.py (265 lines), 32 unit tests, SKILL.md Step 1.0a updated"}
{"id":"Clavain-cl34","title":"Create domain profiles infrastructure (index.yaml + 11 profiles)","description":"Create config/flux-drive/domains/ with index.yaml detection signals and 11 curated domain profiles: game-simulation, ml-pipeline, web-api, cli-tool, mobile-app, embedded-systems, library-sdk, data-pipeline, claude-code-plugin, tui-app, desktop-tauri.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:19.883931055-08:00","created_by":"mk","updated_at":"2026-02-12T13:38:52.242177375-08:00","closed_at":"2026-02-12T13:38:52.242177375-08:00","close_reason":"Already shipped — index.yaml + 11 domain profiles exist in config/flux-drive/domains/"}
{"id":"Clavain-cna","title":"Fix flux-drive output format contract — agents don't produce YAML frontmatter","description":"Agent .md files define their own output formats (### UX Assessment, ### Architecture Assessment, etc.) which conflict with flux-drive's YAML frontmatter requirement in phases/launch.md:110-129. System prompt (agent def) typically wins over user prompt (task content), so agents produce their native format, not the frontmatter Phase 3 needs for machine-parseable synthesis. Fix: either add frontmatter to each agent's .md or add a flux-drive mode preamble that overrides native format.","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:37:54Z","created_by":"mk","updated_at":"2026-02-09T08:50:03Z","closed_at":"2026-02-09T08:50:03Z","close_reason":"Closed"}
{"id":"Clavain-cqk","title":"Plugin conflict resolver — detect overlapping skills/agents","description":"Clavain overlaps with several official plugins: code-review (Clavain has review agents), commit-commands (Clavain has /commit via landing-a-change), code-simplifier (Clavain has code-simplicity-reviewer), feature-dev (Clavain has /work + /lfg). Create a conflict map and either: disable overlapping official plugins via settings, or create routing rules that prefer Clavain's opinionated versions.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-cy3","title":"Update clodex 'When NOT to Use' and add See Also","description":"Update clodex SKILL.md to distinguish dispatch infrastructure from review-as-task. Add See Also reference in flux-drive SKILL.md","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:08:19Z","created_by":"mk","updated_at":"2026-02-08T16:30:23Z","closed_at":"2026-02-08T16:30:23Z","close_reason":"clodex SKILL.md 'When NOT to Use' updated by Codex, verified"}
{"id":"Clavain-d39","title":"Create beads-deep-dive skill for advanced features","description":"Extends beads-workflow with advanced features: federation, daemon, multi-repo agents, messaging. Thin shim pointing to steveyegge/beads docs (MULTI_REPO_AGENTS.md, DAEMON.md, FEDERATION-SETUP.md, messaging.md) via context7/WebFetch. beads-workflow stays as quick-reference.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-d4ao","title":"Define .clavain/ agent memory filesystem contract","description":"Define .clavain/ filesystem conventions that both the Clavain plugin and Autarch platform can read/write. This is the shared contract between prompt-layer (Clavain) and runtime-layer (Autarch).\n\nDirectories:\n- .clavain/index/ (search-friendly markdown indexes, auto-updated)\n- .clavain/scratch/ (ephemeral working state, gitignored)\n- .clavain/learnings/ (curated durable knowledge, feeds /compound)\n- .clavain/contracts/ (API contracts, invariants, SLOs)\n- .clavain/scenarios/ (dev + holdout — Autarch manages content, Clavain reads)\n- .clavain/runs/ (run manifests — Autarch writes, Clavain reads)\n- .clavain/weather.md (model routing — Clavain writes, Autarch reads)\n\nCommands: /index:update, /genrefy\nHooks: auto-compound updates .clavain/index/, session-handoff writes to .clavain/runs/\n\nNote: Autarch-side implementation creates the runtime that populates .clavain/runs/, .clavain/scenarios/, etc. This bead covers the Clavain plugin conventions only.","status":"open","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:01.781508635-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.494219248-08:00"}
{"id":"Clavain-d6f","title":"Extend upstream sync merge set to beads/oracle/agent-mail","notes":"Adding beads/oracle/mcp_agent_mail to upstreams.json fileMap and sync workflow docs/prompts so /clavain:upstream-sync can produce PRs for those repos too.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:26:02Z","created_by":"mk","updated_at":"2026-02-08T16:33:45Z","closed_at":"2026-02-08T16:33:45Z","close_reason":"Completed: added beads/oracle/agent-mail to upstream merge automation and verified PR creation"}
{"id":"Clavain-dbh7","title":"Add async: true to SessionStart hook","description":"Upstream superpowers added async: true to SessionStart hook to prevent TUI blocking on startup. One-line change in hooks/hooks.json. Low risk, improves startup responsiveness.","notes":"Plan: docs/plans/Clavain-dbh7-async-sessionstart.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:08.142266189-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.087495429-08:00","closed_at":"2026-02-11T12:04:49.087495429-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-dh6","title":"Remove thin-section deepening from synthesize.md (lines 79-109)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:48Z","created_by":"mk","updated_at":"2026-02-09T20:29:23Z","closed_at":"2026-02-09T20:29:23Z","close_reason":"Removed thin-section deepening block (lines 79-109) from synthesize.md. Clean excision, zero downstream dependencies, file now 93 lines."}
{"id":"Clavain-dk5","title":"dotfiles-sync.sh hardcodes absolute path","description":"hooks/dotfiles-sync.sh hardcodes an absolute path that assumes a specific server layout. Should derive paths relative to the plugin directory.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:26Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-dm1a","title":"Add token budget controls + per-run cost reporting","description":"Add in-session token budget controls. Clavain handles the prompt-time budgeting; Autarch tracks cross-session economics.\n\nClavain provides:\n- .clavain/budget.yml: max iterations, max tool calls, escalation thresholds per workflow\n- Budget-aware model routing (ties into Weather Report)\n- Per-run approximate token estimates surfaced in /lfg reports\n\nAutarch provides (separate bead):\n- Cross-session cost aggregation in Bigend dashboards\n- Historical token usage per workflow/agent/model\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #14","status":"open","priority":4,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:44.303677892-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.729066609-08:00"}
{"id":"Clavain-dng","title":"Improve Codex integration parity with Claude Code","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:50:35Z","created_by":"mk","updated_at":"2026-02-08T14:56:02Z","closed_at":"2026-02-08T14:56:02Z","close_reason":"Closed"}
{"id":"Clavain-dt3","title":"P1: sync.yml requests unnecessary id-token:write permission","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T22:44:30Z","closed_at":"2026-02-07T22:44:30Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-dxp","title":"Reconcile flux-drive tier naming — Tier 1 (sonnet) vs Tier 3 (opus) is misleading","description":"Tier 1 agents (fd-user-experience, fd-code-quality) use model: sonnet. Tier 3 adaptive agents (architecture-strategist etc.) use model: inherit (opus). In codebase-aware mode, Tier 3 is strictly more capable than Tier 1, making the numbering misleading. Also, synthesis prefers Tier 1/2 over Tier 3, which is wrong when Tier 3 is adaptive and codebase-aware. Consider renaming to Domain Specialists / Adaptive Reviewers / Language Reviewers.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:38:02Z","created_by":"mk","updated_at":"2026-02-09T08:51:57Z","closed_at":"2026-02-09T08:51:57Z","close_reason":"Closed"}
{"id":"Clavain-dzb","title":"Add PR comment commands to trigger Claude/Codex review agents","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:06:43Z","created_by":"mk","updated_at":"2026-02-08T15:08:16Z","closed_at":"2026-02-08T15:08:16Z","close_reason":"Closed"}
{"id":"Clavain-e3v","title":"argument-hint quoting inconsistency in 2 commands","description":"heal-skill.md and create-agent-skill.md use unquoted [bracket] format for argument-hint while 19 other commands use quoted format. Add quotes for consistency.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:12Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-e93","title":"Add /lfg error recovery guidance","description":"The 7-step /lfg pipeline has no failure handling. If any step fails, there is no stop-on-failure instruction, no retry guidance, and no resume-from-step-N capability. Add an Error Recovery section. Source: flux-drive P1-11.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:32Z","created_by":"mk","updated_at":"2026-02-09T00:14:37Z","closed_at":"2026-02-09T00:14:37Z","close_reason":"Error Recovery section added to lfg.md after Step 7."}
{"id":"Clavain-emx","title":"flux-drive Phase 4: replace stale splinterpeer/winterpeer with interpeer modes","description":"flux-drive embeds its own Oracle/cross-model escalation path (Tier 4 oracle-council + Phase 4 comparison + auto-chain) that still references splinterpeer and winterpeer. These are now merged into interpeer modes. Replace: splinterpeer chain → interpeer mine mode, winterpeer/council → interpeer council mode. Remove Tier 4 oracle-council or make it call interpeer deep/council. Source: Oracle interpeer deep review Finding 1.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:07Z","created_by":"mk","updated_at":"2026-02-09T07:16:41Z","closed_at":"2026-02-09T07:16:41Z","close_reason":"Closed"}
{"id":"Clavain-eqo","title":"P1: Red Flags table bloat — 16 lines of per-session context for marginal value","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-evw","title":"Add issue command to trigger upstream sync workflow","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T15:53:43Z","created_by":"mk","updated_at":"2026-02-08T15:55:21Z","closed_at":"2026-02-08T15:55:21Z","close_reason":"Closed"}
{"id":"Clavain-f0m","title":"Add explicit Phase 4 skip condition in SKILL.md before file read","status":"closed","priority":4,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:57Z","created_by":"mk","updated_at":"2026-02-09T15:16:50Z","closed_at":"2026-02-09T15:16:50Z","close_reason":"Absorbed into Clavain-ne6 as acceptance criteria","dependencies":[{"issue_id":"Clavain-f0m","depends_on_id":"Clavain-ne6","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-fg2r","title":"[fd] Add behavioral verification for clodex contract — smoke test + telemetry","description":"From flux-drive review of joyful-wondering-seal (2026-02-12).\n\nAgents: fd-architecture (P0-1), fd-prompt-engineering (P1-3), fd-quality (implicit)\nConvergence: 3/4 agents\n\nAll verification steps are structural (syntax, JSON, pytest). None test whether Claude actually respects the behavioral contract after hook removal. The plan removes a \"cannot violate\" gate and replaces with a \"should not violate\" reminder with zero auditing.\n\nFix: Add behavioral smoke test to verification. Consider PostToolUse logging (write-only, no denial) to detect violations. Also address context window dilution (fd-architecture P0-2) — session-start injection fades after 50+ tool calls.\n\nReview output: docs/research/flux-drive/joyful-wondering-seal/","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:23:53.733728159-08:00","created_by":"mk","updated_at":"2026-02-12T21:01:24.786219317-08:00","closed_at":"2026-02-12T21:01:24.786219317-08:00","close_reason":"Both subtasks complete: audit hook (ukjq) and smoke test (7qpj)","dependencies":[{"issue_id":"Clavain-fg2r","depends_on_id":"Clavain-ukjq","type":"blocks","created_at":"2026-02-12T20:50:58.137303052-08:00","created_by":"mk"},{"issue_id":"Clavain-fg2r","depends_on_id":"Clavain-7qpj","type":"blocks","created_at":"2026-02-12T20:50:58.217721821-08:00","created_by":"mk"}]}
{"id":"Clavain-fg41","title":"Extract swarm orchestration patterns into /lfg parallel mode","description":"Compound-engineering added 1.7K-line orchestrating-swarms skill and /slfg command. Too large to port wholesale. Extract key patterns (inbox messages, task deps, spawn backend detection) and add optional swarm mode to /lfg to parallelize test + quality-gates phases.","notes":"Plan: docs/plans/Clavain-fg41-swarm-patterns.md","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:13.532971334-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.130407163-08:00","closed_at":"2026-02-11T12:04:49.130407163-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-fjr","title":"Beads integration — make bd the default task tracker","description":"Clavain should enforce beads as the task tracker when .beads/ exists. Currently the SessionStart hook from beads' own config handles this, but Clavain should own it: suppress TaskCreate/TodoWrite in favor of bd create, ensure bd prime runs on session start/compact, add bd sync to landing-a-change skill. Make beads a first-class citizen, not an afterthought.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:07:51Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-fmu","title":"Create review-agent.md template","description":"New template at skills/clodex/templates/review-agent.md with Explore/Analyze/Write phases and Final Report","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T16:08:14Z","created_by":"mk","updated_at":"2026-02-08T16:30:23Z","closed_at":"2026-02-08T16:30:23Z","close_reason":"review-agent.md template created by Codex, verified"}
{"id":"Clavain-fvum","title":"Create fd-game-design core review agent","description":"New plugin agent in agents/review/fd-game-design.md. Reviews game balance, pacing, player psychology, feedback loops, emergent behavior, procedural content quality. Update all count surfaces (16→17 agents).","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:19.83072764-08:00","created_by":"mk","updated_at":"2026-02-12T13:38:52.185331959-08:00","closed_at":"2026-02-12T13:38:52.185331959-08:00","close_reason":"Already shipped — fd-game-design.md exists, count surfaces updated to 17 agents"}
{"id":"Clavain-fz77","title":"Add scenario bank + satisfaction scoring to /lfg validation","description":"StrongDM's core principle: correctness from externally observable behavior, not code inspection. Clavain has tests + quality-gates but no scenario bank with holdout sets, no satisfaction metric as a ship gate.\n\nImplement:\n- .clavain/scenarios/dev/ and .clavain/scenarios/holdout/ filesystem layout\n- /scenario:new command to scaffold scenario YAML (intent, setup, steps, expected observations, rubric, risk tags)\n- /scenario:run command to execute scenarios and produce trajectory bundles\n- /scenario:score command using LLM-as-judge + deterministic rubric → satisfaction.json\n- /lfg refuses ship unless satisfaction \u003e= threshold on holdouts\n- Reuse existing agents: fd-user-product as satisfaction judge, fd-correctness as technical oracle, bug-reproduction-validator as scenario runner\n\nThis addresses Oracle P0 findings #1 (holdout scenarios), #2 (validation constraint), and #11 (Seed→Validation→Feedback as /lfg spine).\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md\nRelated beads: Clavain-xweh (shift-work), Clavain-b683 (auto-inject learnings)","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:56:56.145462339-08:00","created_by":"mk","updated_at":"2026-02-11T13:02:52.807576343-08:00","closed_at":"2026-02-11T13:02:52.807576343-08:00","close_reason":"Moving to Autarch — scenario execution, holdout isolation, satisfaction scoring need runtime infrastructure (Gurgeh scenarios + Coldwine runner). Clavain will have thin /scenario:new skill.","dependencies":[{"issue_id":"Clavain-fz77","depends_on_id":"Clavain-d4ao","type":"blocks","created_at":"2026-02-11T12:58:00.942863734-08:00","created_by":"mk"}]}
{"id":"Clavain-g1w","title":"Implement Tier 2 shell tests (bats-core)","description":"Create tests/shell/ with bats-core tests for all hooks: session_start.bats, autopilot.bats, lib.bats, auto_compound.bats, agent_mail_register.bats, dotfiles_sync.bats, hooks_json.bats, plus test_helper.bash with shared setup. Needs fixture files in tests/fixtures/ (minimal_tool_input.json, transcript JSONL files, stop_hook_stdin.json). Per plan: docs/plans/2026-02-10-test-suite-design.md Steps 3-4.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:08Z","created_by":"mk","updated_at":"2026-02-10T12:57:01Z","closed_at":"2026-02-10T12:57:01Z","close_reason":"31 bats tests passing across 7 test files with 5 fixtures","dependencies":[{"issue_id":"Clavain-g1w","depends_on_id":"Clavain-vpf","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-g30","title":"Add \u003cexample\u003e blocks to fd-code-quality and fd-user-experience descriptions","description":"AGENTS.md convention requires all agent descriptions to include concrete \u003cexample\u003e blocks with \u003ccommentary\u003e. The 2 surviving fd-* Domain Specialists (fd-code-quality, fd-user-experience) lack these. All other agents (including the 3 new PRD agents and 3 consolidated agents) have proper examples. Add 1-2 examples each showing when flux-drive would select them.","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T11:42:24Z","created_by":"mk","updated_at":"2026-02-09T11:56:43Z","closed_at":"2026-02-09T11:56:43Z","close_reason":"Codex agents completed all 3 tasks successfully"}
{"id":"Clavain-g9hl","title":"Add DTU-lite workflow for generating behavioral API mock services","description":"StrongDM's DTU creates behavioral clones of third-party services (Okta, Jira, Slack, etc.) for deterministic testing. Full DTU is platform-level, but the workflow is adoptable.\n\nImplement:\n- /dtu:scope — analyze code usage (via Serena) to identify needed endpoints/behaviors\n- /dtu:spec — assemble API contract bundle (OpenAPI, SDK docs, edge cases)\n- /dtu:build — scaffold a twin service (Dockerized, language-agnostic template)\n- /dtu:conformance — run differential tests against real service until behavior matches\n- /dtu:faults — inject failure modes (timeouts, 429s, partial writes, eventual consistency)\n- .clavain/dtu/\u003cservice\u003e/ directory layout: contract/, twin/, conformance/, replay/\n- Also add compatibility targets convention (.clavain/compatibility-targets.yml) from finding #4\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md findings #3, #4","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:18.597875317-08:00","created_by":"mk","updated_at":"2026-02-11T13:03:10.883860884-08:00","closed_at":"2026-02-11T13:03:10.883860884-08:00","close_reason":"Moving to Autarch — DTU requires Docker, conformance testing, background processes. Clavain will have /dtu:scope skill that writes API contracts; Autarch builds/runs twins."}
{"id":"Clavain-gf0","title":"flux-drive: Add triage calibration examples (Phase 1)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:22Z","created_by":"mk","updated_at":"2026-02-08T14:30:48Z","closed_at":"2026-02-08T14:30:48Z","close_reason":"Added scoring examples for Go API plan and Python CLI README, plus quantitative thin/adequate/deep thresholds"}
{"id":"Clavain-gomw","title":"Standardize hook invocation style + shebangs across all scripts","description":"Quality: hooks.json mixes bash quoted and bare invocation styles. Two scripts use #!/bin/bash instead of #!/usr/bin/env bash. Pick one style and apply consistently.","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:34.213875277-08:00","created_by":"mk","updated_at":"2026-02-11T01:21:34.213875277-08:00"}
{"id":"Clavain-gvu","title":"Validation comparison: run flux-drive v2 on real document and compare vs v1","description":"Bead 7 from the flux-drive v2 plan. Run /clavain:flux-drive on a recent real document (e.g. a PR, spec, or code change) and compare v2 output against a v1 run on the same input. Check: (1) agent selection — do 6 agents cover what 19 did? (2) finding quality — are merged agents as thorough? (3) knowledge injection — does qmd retrieval add value? (4) compounding — do knowledge entries get created? (5) synthesis — is the final report coherent with fewer agents? This is the confidence gate before shipping v2 to users.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T10:30:15Z","created_by":"mk","updated_at":"2026-02-10T13:12:32Z","closed_at":"2026-02-10T13:12:32Z","close_reason":"Validation run complete — fd-v2 agents (now fd-*) successfully reviewed their own implementation diff. Agents renamed, v1 deleted, all refs updated."}
{"id":"Clavain-gw0h","title":"Simplify escape_for_json control character loop in lib.sh","description":"Performance: 26-iteration loop scanning for control chars that never appear in markdown. Remove loop or replace with single tr -d pipe. Saves ~50% of escape_for_json time (async hook, so no user-visible impact).","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:30.46962142-08:00","created_by":"mk","updated_at":"2026-02-11T17:48:38.933709459-08:00","closed_at":"2026-02-11T17:48:38.933709459-08:00","close_reason":"Proven necessary by flux-drive review — RFC 8259 requires escaping control chars 0x00-0x1F. Loop is not dead code."}
{"id":"Clavain-hau","title":"CREATION-LOG.md orphan in systematic-debugging","description":"skills/systematic-debugging/ contains a CREATION-LOG.md file that appears to be an orphaned artifact from skill creation. Consider removing.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:23Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-hbcw","title":"Add /semport workflow for semantic code porting with equivalence validation","description":"Add /semport skill for semantic code porting — Clavain-side workflow that delegates heavy lifting to Autarch.\n\nClavain provides:\n- /semport:one-shot skill — gathers source, identifies invariants, writes porting contract to .clavain/contracts/\n- /semport:ongoing skill — checks upstream for changes, triggers Autarch pipeline\n- Equivalence harness spec (what tests prove behavioral equivalence)\n\nAutarch provides (separate bead):\n- Execution of the port (Coldwine task orchestration)\n- Conformance testing (run equivalence harness)\n- Ongoing sync tracking\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #9","status":"open","priority":4,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:32.542098994-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.777982139-08:00"}
{"id":"Clavain-hsz","title":"Create agent-rig-assembly integration skill","description":"Glue skill that wires beads + agent-mail + Agent SDK + Codex + Claude Code together. Contains integration patterns: beads for cross-session state in Agent SDK apps, agent-mail for multi-agent coordination, interclode for parallel execution, deployment of the full stack. Thin shim that composes tools, not a monolith.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:41Z","closed_at":"2026-02-08T01:06:41Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues.","dependencies":[{"issue_id":"Clavain-hsz","depends_on_id":"Clavain-0xm","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"},{"issue_id":"Clavain-hsz","depends_on_id":"Clavain-4pj","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-i1u6","title":"Token optimizations: O3 file reference, O1 universal slicing, O4+O5","description":"O3: write document to file, agents Read it. O1: per-agent sliced views for domain agents. O4: compress output format 50→15 lines. O5: conditional knowledge skip. Target 62% token reduction.","notes":"All 4 optimizations implemented 2026-02-13:\n- O3: File reference pattern (agents Read from temp file)\n- O1: Universal document slicing (section_map for documents \u003e= 200 lines)\n- O4: Compressed output format (42→20 lines)\n- O5: Conditional knowledge skip (omit empty section)\nTotal estimated savings: ~84% reduction in orchestrator prompt cost.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:20.095132049-08:00","created_by":"mk","updated_at":"2026-02-13T09:50:00.801919481-08:00","closed_at":"2026-02-13T09:50:00.801919481-08:00","close_reason":"All 4 token optimizations implemented: O3 file reference, O1 universal document slicing, O4 output compression, O5 conditional knowledge skip. ~84% orchestrator prompt cost reduction."}
{"id":"Clavain-i3o0","title":"Build gen-catalog.py to auto-generate counts + CI test for drift prevention","description":"Oracle insight: make drift impossible, not just fix it. Create scripts/gen-catalog.py that reads all frontmatter, regenerates counts in plugin.json/AGENTS.md/CLAUDE.md/using-clavain. Add CI test: running generator produces no diff. See Oracle cross-review in docs/research/.","notes":"Plan complete. 3 deliverables: scripts/gen-catalog.py (stdlib Python), tests/structural/test_catalog_freshness.py (CI test), bump-version.sh integration. 22 regex rules across 6 target files. See docs/research/plan-build-gen-catalog-py.md","status":"closed","priority":0,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:20:56.255985341-08:00","created_by":"mk","updated_at":"2026-02-11T08:01:41.465261819-08:00","closed_at":"2026-02-11T08:01:41.465261819-08:00","close_reason":"Created scripts/gen-catalog.py (stdlib-only, ~370 lines), tests/structural/test_catalog_freshness.py, docs/catalog.json, integrated into bump-version.sh. All 503 structural tests pass."}
{"id":"Clavain-i82q","title":"Merge requesting-code-review + receiving-code-review into one skill","description":"UX review: these are two sides of the same workflow. Merge into code-review-discipline with requesting and receiving sections. Reduces skill count by 1.","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:26.373955705-08:00","created_by":"mk","updated_at":"2026-02-11T01:21:26.373955705-08:00"}
{"id":"Clavain-id6d","title":"Add \u003cexample\u003e blocks to 6 fd-* agent descriptions","description":"fd-architecture, fd-safety, fd-correctness, fd-quality, fd-user-product, fd-performance all lack required example blocks in their description frontmatter. AGENTS.md convention requires them. All other 10 agents comply. See docs/research/quality-consistency-review-of-clavain.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:13.998802948-08:00","created_by":"mk","updated_at":"2026-02-11T12:27:04.576732505-08:00","closed_at":"2026-02-11T12:27:04.576732505-08:00","close_reason":"P1 beads completed in /lfg workflow"}
{"id":"Clavain-ih6","title":"flux-drive: agent-specific diff slicing for token efficiency","description":"When input is a large diff (1000+ lines), flux-drive sends the full diff to every agent. For the v2 validation run, 3 agents each received 1787 lines = ~5400 lines total. Optimization: slice the diff by file paths into agent-specific sections. E.g., fd-v2-architecture gets only agents/review/*.md + SKILL.md + shared-contracts.md hunks; fd-v2-quality gets agents/review/*.md + validate-roster.sh + knowledge/README.md hunks. Tricky: diff hunks often contain cross-cutting context. May need to include the full diff header + file list for all agents, but only relevant hunks per agent. launch.md already has a 1000+ lines exception — this would implement it for diff inputs.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:16Z","created_by":"mk","updated_at":"2026-02-10T21:43:37Z","closed_at":"2026-02-10T21:43:37Z","close_reason":"Closed"}
{"id":"Clavain-isq","title":"Complete escape_for_json to handle all JSON-illegal control characters","description":"hooks/lib.sh escape_for_json handles backslash, double-quote, newline, CR, tab but omits U+0000-U+001F control chars (backspace, form feed, etc). Could produce invalid JSON from adversarial upstream content. Either extend bash implementation or delegate to jq/python. Source: flux-drive SEC-5 (MEDIUM).","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:59Z","created_by":"mk","updated_at":"2026-02-09T00:14:37Z","closed_at":"2026-02-09T00:14:37Z","close_reason":"escape_for_json now handles all U+0001-U+001F control chars. Named escapes for \\b \\f, \\u00XX for rest."}
{"id":"Clavain-j25","title":"Implement Tier 1 structural tests (pytest)","description":"Create tests/structural/ with pytest tests validating plugin structure: plugin manifest (test_plugin_manifest.py), hooks.json (test_hooks_json.py), agents (test_agents.py), skills (test_skills.py), commands (test_commands.py), cross-references (test_cross_references.py), scripts (test_scripts.py), plus conftest.py with shared fixtures. Must exclude agents/review/references/ from agent globs. Per plan: docs/plans/2026-02-10-test-suite-design.md Steps 1-2.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:04Z","created_by":"mk","updated_at":"2026-02-10T12:57:01Z","closed_at":"2026-02-10T12:57:01Z","close_reason":"521 pytest tests passing in 0.72s across 8 modules","dependencies":[{"issue_id":"Clavain-j25","depends_on_id":"Clavain-vpf","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-khpo","title":"Update docs for beads Dolt transition","description":"Beads transitioned from SQLite to Dolt as default backend. Update AGENTS.md and using-clavain skill to note Dolt default, JSONL fallback when CGO unavailable. 15-minute doc update.","notes":"Plan: docs/plans/Clavain-khpo-dolt-docs.md","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:15.295442136-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.144562518-08:00","closed_at":"2026-02-11T12:04:49.144562518-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-kls","title":"Trim using-clavain session injection from ~2160 to ~900 tokens","description":"using-clavain SKILL.md (8.6KB) is injected via additionalContext on every session. The key commands quick reference (~2.4KB) is rarely needed at start. Split into essential routing (~40 lines) + on-demand reference. 58% reduction. Source: flux-drive P0-4.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:19:10Z","created_by":"mk","updated_at":"2026-02-09T00:36:31Z","closed_at":"2026-02-09T00:36:31Z","close_reason":"Trimmed using-clavain SKILL.md 29.6% (8561→6025 bytes). Removed Key Commands Quick Reference, Skill Types, Plugin Conflicts, User Instructions sections."}
{"id":"Clavain-ko8","title":"Add retry/error handling for Task-dispatched flux-drive agents","description":"Codex dispatch path (phases/launch-codex.md:100-105) has retry logic and fallback. Default Task dispatch path has none — if a background Task agent fails silently, it shows as 'no findings' with no retry. Mirror the Codex path: check for missing findings files, retry once, note failures in synthesis summary.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:38:04Z","created_by":"mk","updated_at":"2026-02-09T08:52:31Z","closed_at":"2026-02-09T08:52:31Z","close_reason":"Closed"}
{"id":"Clavain-ks4","title":"pr-comment-resolver orphan color: blue field","description":"agents/workflow/pr-comment-resolver.md has undocumented color: blue frontmatter field. No other agent uses it, not documented in AGENTS.md. Either document or remove.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:14Z","created_by":"mk","updated_at":"2026-02-08T09:00:55Z","closed_at":"2026-02-08T09:00:55Z","close_reason":"Closed"}
{"id":"Clavain-kto","title":"Fix Oracle timeout inconsistency in flux-drive","description":"SKILL.md roster specifies 'timeout 300' (5 min) in the Oracle bash command example, but phases/launch.md:49 says 'timeout: 600000' (10 min) for the Bash tool call. These should match — pick one value and use it consistently.","status":"closed","priority":3,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:38:06Z","created_by":"mk","updated_at":"2026-02-09T08:52:48Z","closed_at":"2026-02-09T08:52:48Z","close_reason":"Closed"}
{"id":"Clavain-kvlq","title":"Add graph pipeline orchestration (Attractor-mode) to replace linear /lfg","description":"StrongDM's Attractor is a non-interactive coding agent as a graph of phases with checkpoints, resume, fork. Clavain's /lfg is a fixed linear workflow.\n\nImplement:\n- .clavain/pipelines/\u003cname\u003e.dot or YAML format for pipeline graphs\n- /pipeline:new to scaffold a graph\n- /pipeline:run to execute node-by-node\n- /pipeline:resume to resume from checkpoint\n- /pipeline:fork to branch from a node with new assumptions\n- Node execution contract: agent, inputs, tools_allowed, expected_outputs, gate_condition\n- Node outputs written to .clavain/runs/\u003crun_id\u003e/\u003cnode\u003e/\n- After each node, create git commit on run branch + store manifest\n- Depends on .clavain/ filesystem contract and CXDB-lite\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #7","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:13.549659828-08:00","created_by":"mk","updated_at":"2026-02-11T13:03:07.575328204-08:00","closed_at":"2026-02-11T13:03:07.575328204-08:00","close_reason":"Moving to Autarch — graph pipeline orchestration maps to Coldwine task DAG. Clavain /lfg will delegate execution phases to Autarch via MCP.","dependencies":[{"issue_id":"Clavain-kvlq","depends_on_id":"Clavain-d4ao","type":"blocks","created_at":"2026-02-11T12:58:00.826435165-08:00","created_by":"mk"},{"issue_id":"Clavain-kvlq","depends_on_id":"Clavain-re7g","type":"blocks","created_at":"2026-02-11T12:58:00.885018029-08:00","created_by":"mk"}]}
{"id":"Clavain-l32","title":"P1: Routing table missing 7+ commands and 2 skills","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T22:46:23Z","closed_at":"2026-02-07T22:46:23Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-l43","title":"Merge 4 cross-AI skills into single skill with escalation modes","description":"interpeer, prompterpeer, winterpeer, splinterpeer total ~1411 lines and form a strict escalation chain. Each contains duplicate comparison tables. Merge into one cross-ai-review skill with modes: quick/deep/council/mine. Eliminates ~400 lines of duplication. Source: flux-drive P2-5 (2 agents).","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:54Z","created_by":"mk","updated_at":"2026-02-09T01:05:48Z","closed_at":"2026-02-09T01:05:48Z","close_reason":"Merged 4 cross-AI skills (interpeer/prompterpeer/winterpeer/splinterpeer) into unified interpeer skill with quick/deep/council/mine modes. 1411→386 lines (73% reduction). Thin redirects preserve backward compatibility. Oracle references moved from winterpeer/ to interpeer/. upstreams.json updated."}
{"id":"Clavain-l8zk","title":"Add /clavain:describe-pr command for quick PR descriptions","description":"UX review: generate PR title + description from current branch commits. Daily utility that fits Clavain's discipline angle.","status":"open","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:38.51587229-08:00","created_by":"mk","updated_at":"2026-02-11T01:21:38.51587229-08:00"}
{"id":"Clavain-lc1t","title":"Add /clavain:setup mention to SessionStart injection for onboarding","description":"New users have no prompt to discover /clavain:setup. Add one line to SessionStart hook output: First time? Run /clavain:setup to install companion plugins. See UX review + Oracle cross-review.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:22.596548584-08:00","created_by":"mk","updated_at":"2026-02-11T10:46:17.805797386-08:00","closed_at":"2026-02-11T10:46:17.805797386-08:00","close_reason":"All 4 P1 quick wins landed: jq guard in both Stop hooks, 3 redirect skills removed (30 skills now), /clavain:setup hint in SessionStart, EXTREMELY-IMPORTANT block replaced with professional tone. 485 tests pass."}
{"id":"Clavain-ljy","title":"Strengthen file-write instruction in flux-drive agent prompts","description":"Agents spawned via Task(run_in_background: true) may return text to caller instead of writing to OUTPUT_DIR. The 'Write your findings to:' instruction is in the task prompt, not system prompt, and nothing forces agents to use the Write tool. Phase 3 polls OUTPUT_DIR via ls and will time out if files aren't created. Fix: add forceful instruction — 'Your FIRST action must be to use the Write tool to create {OUTPUT_DIR}/{agent-name}.md. All output goes in that file.'","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:37:59Z","created_by":"mk","updated_at":"2026-02-09T08:50:03Z","closed_at":"2026-02-09T08:50:03Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-ljy","depends_on_id":"Clavain-cna","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-lkji","title":"Add agent provenance manifests + scoped capability policies","description":"StrongDM ID provides identity + policy for agents. Full identity infra is out of scope for a plugin, but provenance + scoped capability is adoptable.\n\nImplement:\n- .clavain/provenance/ run manifests: agent name, model, version, commands invoked, artifacts produced\n- .clavain/policy.yml: per-agent file path allowlists/denylists, per-agent tool permissions\n- Enforce policy at command layer: /lfg implementation phase switches to restricted worktree (no holdouts, limited secrets)\n- Supports audit trail for Factory Mode\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #10","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:37.571373329-08:00","created_by":"mk","updated_at":"2026-02-11T13:03:20.661992745-08:00","closed_at":"2026-02-11T13:03:20.661992745-08:00","close_reason":"Moving to Autarch — provenance tracking + policy enforcement need runtime. Bigend observes, Coldwine enforces file/tool access policies.","dependencies":[{"issue_id":"Clavain-lkji","depends_on_id":"Clavain-d4ao","type":"blocks","created_at":"2026-02-11T12:58:01.083813548-08:00","created_by":"mk"}]}
{"id":"Clavain-m2v","title":"Fix scoring: category bonus should not elevate base-0 agents","design":"docs/plans/plan-clavain-m2v.md","status":"closed","priority":3,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:54Z","created_by":"mk","updated_at":"2026-02-10T08:44:52Z","closed_at":"2026-02-10T08:44:52Z","close_reason":"Closed"}
{"id":"Clavain-m3n","title":"P0: agent-native-architecture still has 9 XML tag pairs","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:25Z","created_by":"mk","updated_at":"2026-02-08T00:36:15Z","closed_at":"2026-02-08T00:36:15Z","close_reason":"Closed"}
{"id":"Clavain-m7s","title":"Refine Tier 3 smoke tests and prompt","description":"Smoke test script (tests/smoke/run-smoke-tests.sh) and prompt (tests/smoke/smoke-prompt.md) exist and work (8/8 pass). Improvements needed: consider stronger override of MANDATORY FIRST STEP wrapper, add timeout per-agent, add --verbose flag for detailed output, document the instruction-conflict pattern in the prompt comments. See docs/solutions/best-practices/smoke-test-agent-instruction-conflict-20260210.md for findings.","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:11Z","created_by":"mk","updated_at":"2026-02-10T13:00:32Z","closed_at":"2026-02-10T13:00:32Z","close_reason":"Added instruction-conflict documentation to smoke-prompt.md"}
{"id":"Clavain-mgs","title":"Add knowledge injection to launch.md","description":"Add Step 2.1a for qmd retrieval of knowledge entries. Update prompt template with Knowledge Context section. Add provenance markers.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:21Z","created_by":"mk","updated_at":"2026-02-10T09:59:18Z","closed_at":"2026-02-10T09:59:18Z","close_reason":"Phase 3 complete — all Codex agents succeeded","dependencies":[{"issue_id":"Clavain-mgs","depends_on_id":"Clavain-uid","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-mr7","title":"Refactor flux-drive launch shared contracts","description":"Extract shared launch contracts to shared-contracts.md and slim launch.md + launch-codex.md per Clavain-apn request","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T08:47:57Z","created_by":"mk","updated_at":"2026-02-10T08:50:37Z","closed_at":"2026-02-10T08:50:37Z","close_reason":"Closed"}
{"id":"Clavain-muk","title":"P1: Duplicate brainstorming/SKILL.md mapping in upstreams.json","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T22:44:30Z","closed_at":"2026-02-07T22:44:30Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-n2l","title":"P1: learnings command duplicates engineering-docs — convert to thin shim","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:30Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-n739","title":"Expand smoke tests to 16 agents + command/workflow tests","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T18:42:57.087645324-08:00","created_by":"mk","updated_at":"2026-02-11T19:08:16.426167266-08:00","closed_at":"2026-02-11T19:08:16.426167266-08:00","close_reason":"Completed in this session as Clavain-xnsu — 24-case smoke test suite committed as eddc455"}
{"id":"Clavain-ne6","title":"Simplify Phase 4: keep cross-AI classification, add consent gate, target 30-40 lines","description":"Rewrite cross-ai.md from 97 lines to ~30-40 lines. From 3-model debate consensus.\n\nAcceptance criteria (absorbs Clavain-c7i, Clavain-c6m, Clavain-f0m):\n1. If Oracle absent: offer interpeer quick mode WITH 1-sentence description of what it does/costs (was Clavain-c6m)\n2. If Oracle present: produce Agreement/Oracle-only/Claude-only/Disagreement counts, show top findings\n3. AskUserQuestion consent gate before any interpeer escalation — no auto-chain (was Clavain-c7i)\n4. Add explicit skip condition in SKILL.md before Phase 4 file read: 'If Oracle not in roster, skip' (was Clavain-f0m)\n5. Remove Steps 4.3-4.5 auto-chain and sequential decision prompts\n6. Single consolidated escalation prompt with context for each option\n\nFiles: skills/flux-drive/phases/cross-ai.md (rewrite), skills/flux-drive/SKILL.md (add skip gate)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:43Z","created_by":"mk","updated_at":"2026-02-09T20:29:23Z","closed_at":"2026-02-09T20:29:23Z","close_reason":"Rewrote cross-ai.md from 97 to 30 lines. Added SKILL.md skip gate, consent gate via AskUserQuestion, 2-category classification (blind spots + conflicts), decoupled interpeer integration section."}
{"id":"Clavain-np7b","title":"Add guessable command aliases (deep-review, full-pipeline, cross-review)","description":"Oracle: keep cool names for muscle memory, add guessable aliases. /clavain:deep-review -\u003e flux-drive, /clavain:full-pipeline -\u003e lfg, /clavain:cross-review -\u003e interpeer. Make /help recommend guessable names first.","notes":"PRD: docs/prds/2026-02-12-p2-batch-sync-and-discoverability.md (F5)","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:25.741611043-08:00","created_by":"mk","updated_at":"2026-02-11T21:32:51.039837636-08:00","closed_at":"2026-02-11T21:32:51.039837636-08:00","close_reason":"Already shipped — deep-review.md, full-pipeline.md, cross-review.md exist in commands/","dependencies":[{"issue_id":"Clavain-np7b","depends_on_id":"Clavain-p5ex","type":"blocks","created_at":"2026-02-11T21:22:04.008770285-08:00","created_by":"mk"}]}
{"id":"Clavain-nta","title":"Fix parallel dispatch correctness: atomic rename, run scoping, retry guards, timeout","description":"Consolidates Clavain-563, Clavain-r5t, Clavain-8xs. All three modify Step 2.2-2.3 of launch.md.\n\nAcceptance criteria (from 3-model debate consensus):\n1. Universal completion protocol: agents write to {name}.md.partial, rename to {name}.md on completion\n2. End-of-file sentinel: last line must be \u003c!-- flux-drive:complete --\u003e\n3. Run scoping: OUTPUT_DIR includes timestamp or is cleaned at start to prevent stale-write contamination\n4. Retry guard: re-check file existence before retry AND before stub write. Never overwrite non-stub\n5. Foreground retry timeout: 5 min cap (timeout: 300000)\n6. Oracle path: write to .tmp.md, rename on success, write verdict:error on failure before rename\n\nFiles to modify: skills/flux-drive/phases/launch.md (Steps 2.2-2.3), skills/flux-drive/SKILL.md (OUTPUT_DIR definition)","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T15:15:23Z","created_by":"mk","updated_at":"2026-02-09T20:55:12Z","closed_at":"2026-02-09T20:55:12Z","close_reason":"Atomic rename (.partial→.md), sentinel (flux-drive:complete), run isolation (clean stale files), pre-retry guard, 5-min retry timeout, Oracle verdict:error stub on failure. Changes in launch.md Steps 2.0/2.2/2.3 and SKILL.md OUTPUT_DIR/Oracle command."}
{"id":"Clavain-ojt","title":"Consolidate 3 resolve-* commands into single /resolve","description":"resolve-parallel, resolve-todo-parallel, resolve-pr-parallel share identical 4-step workflow, differ only in input source (grep, files, gh). Merge into one /resolve command with auto-detection or --source flag. Source: flux-drive P1-10 (3 agents agree).","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:47Z","created_by":"mk","updated_at":"2026-02-09T07:57:27Z","closed_at":"2026-02-09T07:57:27Z","close_reason":"Closed"}
{"id":"Clavain-old","title":"flux-drive: Enforce section trimming for token optimization (Phase 2)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:20Z","created_by":"mk","updated_at":"2026-02-08T14:31:39Z","closed_at":"2026-02-08T14:31:39Z","close_reason":"Replaced vague trimming instruction with explicit numbered rules, 50% target, and per-agent section mapping"}
{"id":"Clavain-oxr","title":"Update SKILL.md roster and triage for 6 agents","description":"Replace 19-agent Plugin Agents table with 6-agent table. Update pre-filter rules, scoring examples, domain-general list. Keep Project Agents, Oracle, cap at 8.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:20Z","created_by":"mk","updated_at":"2026-02-10T09:55:58Z","closed_at":"2026-02-10T09:55:58Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-oxr","depends_on_id":"Clavain-7nk","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-p452","title":"Implement dynamic domain criteria injection in Phase 2 launch","description":"Inject domain-specific review criteria into agent prompts during Phase 2. 3-5 bullets per agent from matched domain profile. Multi-domain merging with cap.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T10:46:19.98985236-08:00","created_by":"mk","updated_at":"2026-02-12T15:09:05.668830931-08:00","closed_at":"2026-02-12T15:09:05.668830931-08:00","close_reason":"Implemented in launch.md Step 2.1a: loads domain profiles, extracts per-agent injection criteria, injects as Domain Context in prompt template. Multi-domain support (up to 3, ordered by confidence).","dependencies":[{"issue_id":"Clavain-p452","depends_on_id":"Clavain-0uzm","type":"blocks","created_at":"2026-02-12T10:46:26.41558042-08:00","created_by":"mk"},{"issue_id":"Clavain-p452","depends_on_id":"Clavain-cl34","type":"blocks","created_at":"2026-02-12T10:46:26.499915757-08:00","created_by":"mk"},{"issue_id":"Clavain-p452","depends_on_id":"Clavain-ckz2","type":"blocks","created_at":"2026-02-12T14:07:28.300599415-08:00","created_by":"mk"}]}
{"id":"Clavain-p5ex","title":"Split using-clavain into injected router card + full /help catalog","description":"Oracle: using-clavain tries to be routing table + behavioral policy + catalog + docs + cross-AI explainer. Split: inject compact router card (top 8 commands + routing heuristic), full catalog via /clavain:help command.","notes":"PRD: docs/prds/2026-02-12-p2-batch-sync-and-discoverability.md (F4)","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:33.565782579-08:00","created_by":"mk","updated_at":"2026-02-11T21:32:50.269246674-08:00","closed_at":"2026-02-11T21:32:50.269246674-08:00","close_reason":"Already shipped — SKILL.md is 41 lines, routing-tables.md exists"}
{"id":"Clavain-p86","title":"/lfg: add test/verification gate before quality-gates","description":"/quality-gates says 'run after tests pass' but /lfg doesn't include a hard test gate step. Clodex-mode execution may skip /work which contains continuous testing guidance. Insert explicit verification step before quality-gates: run project test + lint commands and fail fast. Could use verification-before-completion skill. Source: Oracle interpeer deep review Finding 14.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:26Z","created_by":"mk","updated_at":"2026-02-09T07:18:16Z","closed_at":"2026-02-09T07:18:16Z","close_reason":"Closed"}
{"id":"Clavain-pai","title":"Commit 3 uncommitted PRD agents (product-skeptic, strategic-reviewer, user-advocate)","description":"3 PRD agents exist on disk but were never committed. The flux-drive roster (SKILL.md lines 212-214), AGENTS.md, and README.md all reference them, but published plugin v0.4.13 doesn't include them. Anyone installing Clavain gets a roster that references agents that don't exist. Fix: git add and commit the 3 files.","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T11:42:18Z","created_by":"mk","updated_at":"2026-02-09T11:53:34Z","closed_at":"2026-02-09T11:53:34Z","close_reason":"Staged 3 PRD agent files for commit"}
{"id":"Clavain-q703","title":"Add model routing policy + consensus planning across providers","description":"Add model routing policy + consensus planning. This stays in Clavain because model selection is a prompt-time decision.\n\nImplement:\n- .clavain/weather.md + .clavain/models.yml mapping task_type + risk_tier → provider/model/params\n- /models:route command — given task context, select optimal model(s)\n- /consensus:plan command — run two independent planners (Claude + GPT via Oracle), merge via plan-reviewer\n- Escalation policy: when confidence is low, auto-escalate to stronger model\n- session-start hook injects today's routing rules\n- Store routing decisions in .clavain/runs/ (Autarch can read for cross-session tracking)\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #8","status":"open","priority":4,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:23.017335798-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.555722175-08:00"}
{"id":"Clavain-qrh","title":"/quality-gates: specify diff-driven reviewer context","description":"/quality-gates selects agents by file extension but doesn't specify what context agents actually review. Standardize: unified diff (git diff HEAD + git diff --cached), list of changed files with reasons, relevant config if touched. Ask reviewers to reference diff hunks in findings (file:line). Source: Oracle interpeer deep review Finding 16.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:14Z","created_by":"mk","updated_at":"2026-02-09T07:16:41Z","closed_at":"2026-02-09T07:16:41Z","close_reason":"Closed"}
{"id":"Clavain-r5t","title":"Guard agent lifecycle: re-check before retry/stub, never overwrite non-stub","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:36Z","created_by":"mk","updated_at":"2026-02-09T15:16:12Z","closed_at":"2026-02-09T15:16:12Z","close_reason":"Consolidated into Clavain-nta"}
{"id":"Clavain-re7g","title":"Add CXDB-lite: run DAG + blob CAS for observability and recovery","description":"StrongDM's CXDB provides turn DAG, blob dedup, and typed payloads for agent observability. Full CXDB is too heavy for a plugin, but the primitives are valuable.\n\nImplement Option A (practical):\n- Local SQLite for turns + edges (DAG) in .clavain/runs/\n- Filesystem CAS for blobs: .clavain/blobs/\u003cblake3-hash\u003e\n- Typed JSON envelopes: clavain.turn.v1, clavain.toolcall.v1, clavain.scenario_result.v1\n- /run:inspect command to visualize what happened in a run\n- /run:fork command to branch from a checkpoint with new assumptions\n- Wire into flux-drive and /lfg for structured run logging\n\nBecomes P0 if Attractor-mode pipelines are adopted (finding #7).\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #6","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:08.679311673-08:00","created_by":"mk","updated_at":"2026-02-11T13:02:59.055842077-08:00","closed_at":"2026-02-11T13:02:59.055842077-08:00","close_reason":"Moving to Autarch — SQLite run DAG + blob CAS is platform infrastructure, will be exposed via autarch-mcp. Not feasible in a markdown plugin.","dependencies":[{"issue_id":"Clavain-re7g","depends_on_id":"Clavain-d4ao","type":"blocks","created_at":"2026-02-11T12:58:00.76012461-08:00","created_by":"mk"}]}
{"id":"Clavain-rvpk","title":"Guard jq dependency in Stop hooks (fail-open if missing)","description":"auto-compound.sh and session-handoff.sh use jq for input parsing without command -v guard. Under set -euo pipefail, both crash on systems without jq. Add early exit: if ! command -v jq; then exit 0; fi. See docs/research/quality-consistency-review-of-clavain.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:05.147348431-08:00","created_by":"mk","updated_at":"2026-02-11T10:46:17.775668808-08:00","closed_at":"2026-02-11T10:46:17.775668808-08:00","close_reason":"All 4 P1 quick wins landed: jq guard in both Stop hooks, 3 redirect skills removed (30 skills now), /clavain:setup hint in SessionStart, EXTREMELY-IMPORTANT block replaced with professional tone. 485 tests pass."}
{"id":"Clavain-rwi","title":"Assign model: sonnet/haiku to mechanical review agents","description":"28 of 29 agents use model: inherit (Opus-class). Assign model: sonnet to fd-code-quality, fd-user-experience, pattern-recognition-specialist, shell-reviewer, code-simplicity-reviewer, deployment-verification-agent. Assign model: haiku to git-history-analyzer. ~50-60% cost reduction. Source: flux-drive P1-13.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:35Z","created_by":"mk","updated_at":"2026-02-09T00:40:31Z","closed_at":"2026-02-09T00:40:31Z","close_reason":"Assigned model: sonnet to 6 mechanical review agents, model: haiku to git-history-analyzer via Codex dispatch."}
{"id":"Clavain-rzn","title":"Merge Tier 1/3 agent pairs into conditional agents","description":"fd-architecture/architecture-strategist, fd-security/security-sentinel, fd-performance/performance-oracle cover same domains at 2 tiers. Merge each pair into one agent that conditionally reads project docs when available. Eliminates 3 agents and ~250 lines. Source: flux-drive P2-4 (code-simplicity).","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:50Z","created_by":"mk","updated_at":"2026-02-09T07:57:27Z","closed_at":"2026-02-09T07:57:27Z","close_reason":"Closed"}
{"id":"Clavain-s3j","title":"Implement incremental depth: launch top agents first, expand on demand","description":"Instead of launching all selected agents simultaneously, implement a two-stage dispatch: Stage 1: Launch the top 2-3 highest-scoring agents. Wait for results. Stage 2: Based on findings, decide whether to launch additional agents: - If top agents found P0 issues → launch remaining agents for convergence data. - If top agents found only minor/no issues → stop early, save 50%+ of agent tokens. - If agents disagree → launch a specific tiebreaker agent. This is 'early stopping' for agent dispatch. Current system launches everything regardless of whether findings warrant full coverage. Expected savings: 30-50% on easy/clean reviews where top 2-3 agents find nothing concerning. Quality impact: neutral to positive — specialists still get launched when needed, and the early-stop decision is informed by actual findings, not just triage scores. Files: skills/flux-drive/SKILL.md (Phase 1 triage changes), skills/flux-drive/phases/launch.md (staged dispatch), skills/flux-drive/phases/synthesize.md (handle partial agent sets)","design":"docs/plans/plan-clavain-s3j.md","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:14:47Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-s65","title":"Add spec-flow-analyzer to flux-drive roster or remove from scoring example","description":"spec-flow-analyzer appears in the PRD scoring example (SKILL.md line 142) but is NOT listed in any roster table (Domain Specialists, Adaptive Reviewers, or Cross-AI). It lives at agents/workflow/spec-flow-analyzer.md with subagent_type clavain:workflow:spec-flow-analyzer. Either add it to the Adaptive Reviewers table or remove from the scoring example to avoid confusion.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T11:42:21Z","created_by":"mk","updated_at":"2026-02-09T11:56:43Z","closed_at":"2026-02-09T11:56:43Z","close_reason":"Codex agents completed all 3 tasks successfully"}
{"id":"Clavain-sjr","title":"P1: plan-reviewer.md uses YAML block scalar instead of inline quoted","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-swio","title":"Begin sync-upstreams.sh Python rewrite","description":"Architecture agent: at 1,019 lines with 15 inline Python subprocesses, sync-upstreams.sh has outgrown bash. Hybrid architecture creates injection risks. Rewrite in Python keeping existing COPY/AUTO/KEEP-LOCAL/CONFLICT semantics. See docs/research/architecture-review-of-clavain.md","notes":"PRD: docs/prds/2026-02-12-p2-batch-sync-and-discoverability.md (F2)","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:39.420516682-08:00","created_by":"mk","updated_at":"2026-02-12T00:09:09.904379758-08:00","closed_at":"2026-02-12T00:09:09.904379758-08:00","close_reason":"Python sync rewrite complete: 7 modules, 44 tests, regression verified","dependencies":[{"issue_id":"Clavain-swio","depends_on_id":"Clavain-3w1x","type":"blocks","created_at":"2026-02-11T21:22:02.699464362-08:00","created_by":"mk"},{"issue_id":"Clavain-swio","depends_on_id":"Clavain-4728","type":"blocks","created_at":"2026-02-11T21:22:03.376787419-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp","title":"Phase-Gated /lfg with Work Discovery","description":"Evolve /lfg into an intelligent work-finder with formal phase tracking. Two milestones: M1 (Work Discovery) and M2 (Phase Gates). PRD: docs/prds/2026-02-12-phase-gated-lfg.md","notes":"M1 complete (7/8 features). F3 orphan detection + F4 brief scan shipped in interphase 0.2.0 + Clavain 0.5.9. M2 remains: F7 smart scoring, F8 predictive suggestions.","status":"in_progress","priority":1,"issue_type":"epic","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:34.667957719-08:00","created_by":"mk","updated_at":"2026-02-13T12:04:36.832159495-08:00","labels":["phase:plan-reviewed"]}
{"id":"Clavain-tayp.1","title":"State change: phase → planned","description":"Set phase to planned\n\nReason: Plan: docs/plans/2026-02-13-m1-f3-f4-work-discovery.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T11:47:57.016543298-08:00","created_by":"mk","updated_at":"2026-02-13T11:47:57.016543298-08:00","dependencies":[{"issue_id":"Clavain-tayp.1","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T11:47:57.018167147-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.2","title":"State change: phase → plan-reviewed","description":"Changed phase from planned to plan-reviewed\n\nReason: Plan reviewed: docs/plans/2026-02-13-m1-f3-f4-work-discovery.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T11:51:26.184172855-08:00","created_by":"mk","updated_at":"2026-02-13T11:51:26.184172855-08:00","dependencies":[{"issue_id":"Clavain-tayp.2","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T11:51:26.186361819-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.3","title":"State change: phase → executing","description":"Changed phase from plan-reviewed to executing\n\nReason: Executing: docs/plans/2026-02-13-m1-f3-f4-work-discovery.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T11:51:30.703701711-08:00","created_by":"mk","updated_at":"2026-02-13T11:51:30.703701711-08:00","dependencies":[{"issue_id":"Clavain-tayp.3","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T11:51:30.705842975-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.4","title":"State change: phase → shipping","description":"Changed phase from plan-reviewed to shipping\n\nReason: Quality gates passed","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T12:01:51.505519563-08:00","created_by":"mk","updated_at":"2026-02-13T12:01:51.505519563-08:00","dependencies":[{"issue_id":"Clavain-tayp.4","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T12:01:51.508542447-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.5","title":"State change: phase → done","description":"Changed phase from shipping to done\n\nReason: M1 complete: F3+F4 shipped","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T12:03:28.169526274-08:00","created_by":"mk","updated_at":"2026-02-13T12:03:28.169526274-08:00","dependencies":[{"issue_id":"Clavain-tayp.5","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T12:03:28.171589821-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.6","title":"State change: phase → planned","description":"Changed phase from shipping to planned\n\nReason: Plan: docs/plans/2026-02-13-m2-phase-gates.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T14:39:48.903945168-08:00","created_by":"mk","updated_at":"2026-02-13T14:39:48.903945168-08:00","dependencies":[{"issue_id":"Clavain-tayp.6","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T14:39:48.905942048-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.7","title":"State change: phase → plan-reviewed","description":"Changed phase from shipping to plan-reviewed\n\nReason: Plan reviewed: docs/plans/2026-02-13-m2-phase-gates.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T14:46:51.859968685-08:00","created_by":"mk","updated_at":"2026-02-13T14:46:51.859968685-08:00","dependencies":[{"issue_id":"Clavain-tayp.7","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T14:46:51.863174812-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.8","title":"State change: phase → executing","description":"Changed phase from plan-reviewed to executing\n\nReason: Executing: docs/plans/2026-02-13-m2-phase-gates.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T14:47:08.052124594-08:00","created_by":"mk","updated_at":"2026-02-13T14:47:08.052124594-08:00","dependencies":[{"issue_id":"Clavain-tayp.8","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T14:47:08.053971781-08:00","created_by":"mk"}]}
{"id":"Clavain-tayp.9","title":"State change: phase → shipping","description":"Changed phase from plan-reviewed to shipping\n\nReason: Quality gates passed","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T15:05:53.791477199-08:00","created_by":"mk","updated_at":"2026-02-13T15:05:53.791477199-08:00","dependencies":[{"issue_id":"Clavain-tayp.9","depends_on_id":"Clavain-tayp","type":"parent-child","created_at":"2026-02-13T15:05:53.795936174-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62","title":"JSONL stream parser for dispatch.sh — live Codex progress in statusline","description":"Add a lightweight JSONL stream parser to dispatch.sh that captures codex exec --json events in real-time and updates /tmp/clavain-dispatch-$$.json with current activity (file being edited, tool running, test output). Interline's statusline already reads dispatch state — this gives live progress visibility instead of just 'Clodex: taskname' for the 5-20 minute duration of Codex sessions.\n\nApproach:\n1. Pipe codex exec --json stdout through a background jq/awk parser\n2. Parser updates the dispatch state file with latest activity on each event\n3. Statusline picks up changes on next refresh (~1s)\n4. No experimental flags needed — uses existing --json JSONL output\n\nFiles: scripts/dispatch.sh (stream parser), possibly interline statusline (richer dispatch display)","notes":"Not started this session. Depends on dispatch.sh having --json JSONL output from Codex. Interline statusline now reads dispatch state — this adds richer live progress.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T21:37:27.650987686-08:00","created_by":"mk","updated_at":"2026-02-13T00:08:43.854473515-08:00","closed_at":"2026-02-13T00:08:43.854473515-08:00","close_reason":"JSONL stream parser shipped in v0.5.6 — live Codex progress in statusline + post-run summaries","labels":["phase:shipping"]}
{"id":"Clavain-tb62.1","title":"State change: phase → brainstorm","description":"Set phase to brainstorm\n\nReason: Brainstorm: docs/brainstorms/2026-02-13-jsonl-stream-parser-brainstorm.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T23:54:57.225147063-08:00","created_by":"mk","updated_at":"2026-02-12T23:54:57.225147063-08:00","dependencies":[{"issue_id":"Clavain-tb62.1","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-12T23:54:57.227574348-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.2","title":"State change: phase → strategized","description":"Changed phase from brainstorm to strategized\n\nReason: Brainstorm is self-contained — skipping separate PRD","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T23:55:09.312523465-08:00","created_by":"mk","updated_at":"2026-02-12T23:55:09.312523465-08:00","dependencies":[{"issue_id":"Clavain-tb62.2","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-12T23:55:09.314578089-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.3","title":"State change: phase → planned","description":"Changed phase from brainstorm to planned\n\nReason: Plan: docs/plans/2026-02-13-jsonl-stream-parser.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T23:56:40.955199556-08:00","created_by":"mk","updated_at":"2026-02-12T23:56:40.955199556-08:00","dependencies":[{"issue_id":"Clavain-tb62.3","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-12T23:56:40.95674326-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.4","title":"State change: phase → plan-reviewed","description":"Changed phase from brainstorm to plan-reviewed\n\nReason: Plan reviewed: docs/plans/2026-02-13-jsonl-stream-parser.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T00:03:34.114411817-08:00","created_by":"mk","updated_at":"2026-02-13T00:03:34.114411817-08:00","dependencies":[{"issue_id":"Clavain-tb62.4","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-13T00:03:34.118009004-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.5","title":"State change: phase → executing","description":"Changed phase from plan-reviewed to executing\n\nReason: Executing: docs/plans/2026-02-13-jsonl-stream-parser.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T00:03:38.691987677-08:00","created_by":"mk","updated_at":"2026-02-13T00:03:38.691987677-08:00","dependencies":[{"issue_id":"Clavain-tb62.5","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-13T00:03:38.693661215-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.6","title":"State change: phase → shipping","description":"Changed phase from plan-reviewed to shipping\n\nReason: Quality gates passed — all tests green","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T00:08:07.732266167-08:00","created_by":"mk","updated_at":"2026-02-13T00:08:07.732266167-08:00","dependencies":[{"issue_id":"Clavain-tb62.6","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-13T00:08:07.734028773-08:00","created_by":"mk"}]}
{"id":"Clavain-tb62.7","title":"State change: phase → done","description":"Changed phase from shipping to done\n\nReason: Shipped","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-13T00:08:49.191271241-08:00","created_by":"mk","updated_at":"2026-02-13T00:08:49.191271241-08:00","dependencies":[{"issue_id":"Clavain-tb62.7","depends_on_id":"Clavain-tb62","type":"parent-child","created_at":"2026-02-13T00:08:49.192965318-08:00","created_by":"mk"}]}
{"id":"Clavain-tcwv","title":"Add evidence pack pipeline for converting obstacles into model-consumable inputs","description":"StrongDM's Apply More Tokens principle: convert every obstacle into something models can process — traces, screens, transcripts, replays.\n\nImplement:\n- .clavain/evidence/\u003ccase_id\u003e/ directory with logs/, screens/, traces/, replays/, customer-notes/\n- manifest.yml describing provenance + how to replay\n- /evidence:new — scaffold an evidence pack\n- /evidence:ingest — paste logs, link traces, normalize into structured format\n- /evidence:replay — turn evidence into scenario steps (feeds into scenario bank)\n- Wire into feedback loop: failing scenario auto-generates evidence pack\n\nDesign doc: docs/research/flux-drive/strongdm-techniques/oracle-gap-analysis.md finding #12","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T12:57:27.747450211-08:00","created_by":"mk","updated_at":"2026-02-11T13:03:14.896364587-08:00","closed_at":"2026-02-11T13:03:14.896364587-08:00","close_reason":"Moving to Autarch — evidence ingestion/replay is Pollard's domain. Clavain will have /evidence:new skill for scaffolding; Autarch handles storage and replay.","dependencies":[{"issue_id":"Clavain-tcwv","depends_on_id":"Clavain-fz77","type":"blocks","created_at":"2026-02-11T12:58:01.003908681-08:00","created_by":"mk"}]}
{"id":"Clavain-th4","title":"Fix Agent Roster: tier vocabulary, spec-flow-analyzer categorization, table cleanup","description":"Consolidates Clavain-th4 and Clavain-4q1. Both are single-edit changes to the Agent Roster table in SKILL.md.\n\nAcceptance criteria:\n1. Remove 'domain' from tier enum in YAML/markdown output spec — no agents use it. Canonical tiers: project, adaptive, cross-ai\n2. Standardize tier vocabulary across SKILL.md, launch.md, and launch-codex.md\n3. Move spec-flow-analyzer to its own 'Workflow Agents' sub-table (it uses clavain:workflow: subagent_type, not clavain:review:)\n4. Or: rename 'Adaptive Reviewers' to 'Plugin Agents' to accurately describe all non-Project, non-Oracle agents\n\nFiles: skills/flux-drive/SKILL.md (roster section), skills/flux-drive/phases/launch.md (tier in prompt template)","design":"docs/plans/plan-clavain-th4.md","status":"closed","priority":3,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T14:57:46Z","created_by":"mk","updated_at":"2026-02-10T08:27:52Z","closed_at":"2026-02-10T08:27:52Z","close_reason":"Closed"}
{"id":"Clavain-u3s","title":"P1: Agent Mail MCP server has no authentication","description":"- type: bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T22:49:48Z","closed_at":"2026-02-07T22:49:48Z","close_reason":"Agent Mail MCP runs on 127.0.0.1:8765 (localhost only). Authentication is unnecessary for loopback services — only local processes can reach it. Not a security issue.","labels":["flux-drive"]}
{"id":"Clavain-ub8n","title":"flux-gen: add frontmatter and move boilerplate to dispatch-time","description":"P1-4 and IMP-1 from fd-prompt-engineering review. (1) Generated agents have no YAML frontmatter (name, description, model fields). Core agents all have it. Add frontmatter block to template. (2) ~190 tokens per agent of static boilerplate (First Step, How to Review, Focus Rules) is duplicated identically. Since generated agents are always invoked through flux-drive which injects its own template, move shared content to dispatch-time injection. Agent files should contain only domain-specific content.","notes":"YAML frontmatter is done (flux_gen_version: 2, domain, generated_at, generated_by). Remaining: move shared boilerplate (First Step, What NOT to Flag, Prioritization) to dispatch-time injection so agent files contain only domain-specific content.","status":"open","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T19:19:50.126336885-08:00","created_by":"mk","updated_at":"2026-02-13T00:02:55.143468462-08:00","dependencies":[{"issue_id":"Clavain-ub8n","depends_on_id":"Clavain-4jeg","type":"blocks","created_at":"2026-02-12T19:19:57.977606508-08:00","created_by":"mk"}]}
{"id":"Clavain-ud3","title":"fd-* agents: document as flux-drive internals in routing table","description":"fd-architecture, fd-security, fd-code-quality, fd-performance, fd-user-experience are flux-drive-scoped Tier 1 agents but appear alongside general reviewers in agent roster. Users may invoke the wrong agent directly. Document fd-* as flux-drive internals (auto-selected by flux-drive, not for direct invocation) or note this clearly in the routing table. Source: Oracle interpeer deep review Finding 9.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:24Z","created_by":"mk","updated_at":"2026-02-09T07:16:41Z","closed_at":"2026-02-09T07:16:41Z","close_reason":"Closed"}
{"id":"Clavain-ufd","title":"Evaluate two-pass architecture: triage agent → targeted specialists","description":"Alternative architecture for flux-drive that could save 40-60% of tokens. Pass 1 (cheap): A single lightweight 'triage agent' reads the full document and produces a structured list of concerns tagged by domain (security, architecture, performance, etc.). This agent doesn't need deep expertise — just the ability to flag 'this section has a security implication'. Pass 2 (targeted): Launch specialist agents ONLY for domains where Pass 1 flagged actual concerns. Each specialist gets the relevant document section + the triage flag, not the full document. If Pass 1 finds concerns in 2 of 6 domains, Pass 2 launches 2 agents instead of 6. Document duplication drops from 6× to 2×. Risk: triage agent might miss things only a specialist would catch. Needs testing against current approach on 5-10 real reviews to measure quality delta. This is a larger architectural change — create a prototype first. Files: skills/flux-drive/SKILL.md (new architecture), skills/flux-drive/phases/ (all phases affected)","design":"docs/plans/plan-clavain-ufd.md","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T18:15:06Z","created_by":"mk","updated_at":"2026-02-10T08:21:18Z","closed_at":"2026-02-10T08:21:18Z","close_reason":"Deferred. Clavain-s3j (incremental depth) achieves 30-50% token savings with simpler architecture and less risk. Two-pass introduces a triage agent single point of failure and requires domain taxonomy calibration. Revisit if s3j delivers \u003c20% savings in practice."}
{"id":"Clavain-uid","title":"Create knowledge directory and format docs","description":"Create config/flux-drive/knowledge/.gitkeep and README.md documenting entry format, provenance rules, decay rules, sanitization rules.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:19Z","created_by":"mk","updated_at":"2026-02-10T09:54:04Z","closed_at":"2026-02-10T09:54:04Z","close_reason":"Closed"}
{"id":"Clavain-ukjq","title":"Add PostToolUse audit hook for clodex contract violations","description":"When clodex mode is ON, log (don't deny) any Edit/Write/MultiEdit to source code files. Write-only PostToolUse hook that records violations to a log file (.claude/clodex-audit.log) for post-session review. This provides the audit trail that the removed PreToolUse deny-gate used to provide, without blocking. Implementation: hooks/clodex-audit.sh + PostToolUse entry in hooks.json with same matcher as old PreToolUse (Edit|Write|MultiEdit|NotebookEdit). Only logs when flag file exists.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:50:41.88160409-08:00","created_by":"mk","updated_at":"2026-02-12T21:01:24.629949885-08:00","closed_at":"2026-02-12T21:01:24.629949885-08:00","close_reason":"PostToolUse audit hook created (clodex-audit.sh), hooks.json updated, tests updated, doc counts 4→5"}
{"id":"Clavain-ur4f","title":"F3: Orphaned Artifact Detection","description":"Scan docs/brainstorms/, docs/prds/, docs/plans/ for files not linked to any bead. Include in discovery with Create bead? action.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:44.971725872-08:00","created_by":"mk","updated_at":"2026-02-13T12:03:21.81000045-08:00","closed_at":"2026-02-13T12:03:21.81000045-08:00","close_reason":"F3 orphan detection shipped in interphase 0.2.0 + Clavain 0.5.9","dependencies":[{"issue_id":"Clavain-ur4f","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.212838395-08:00","created_by":"mk"},{"issue_id":"Clavain-ur4f","depends_on_id":"Clavain-6czs","type":"blocks","created_at":"2026-02-12T11:02:04.303104304-08:00","created_by":"mk"}]}
{"id":"Clavain-urz","title":"Implement flux-drive v2 MVP: 6 core agents + single-tier knowledge + silent compounding","description":"Architecture doc: docs/research/flux-drive-v2-architecture.md. Replace 19 specialized agents with 6 core agents (Architecture \u0026 Design, Safety, Correctness, Quality \u0026 Style, User \u0026 Product, Performance) + Oracle. Add single-tier knowledge layer in config/flux-drive/knowledge/ with qmd retrieval (5 entries/agent cap). Add silent post-synthesis compounding hook (Sonnet model). Includes provenance tracking, evidence anchors, sanitization rule, first-run bootstrap, and retraction mechanism. Validation plan: run controlled comparison on 3 recent reviews before shipping.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T08:52:00Z","created_by":"mk","updated_at":"2026-02-10T09:59:23Z","closed_at":"2026-02-10T09:59:23Z","close_reason":"All 6 implementation beads complete: 6 core agents, knowledge layer, SKILL.md roster, knowledge injection, silent compounding, validate-roster"}
{"id":"Clavain-uyt","title":"Clarify document trimming responsibility in flux-drive prompt template","description":"phases/launch.md:76-84 Token Optimization block is ambiguous — reads as instruction to the agent but should be work done by the orchestrator before pasting. If flux-drive includes full doc and expects agent to trim, 100% of tokens are sent anyway. Fix: orchestrator trims before pasting, remove the Token Optimization block from agent-facing prompt.","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T08:37:56Z","created_by":"mk","updated_at":"2026-02-09T08:50:03Z","closed_at":"2026-02-09T08:50:03Z","close_reason":"Closed","dependencies":[{"issue_id":"Clavain-uyt","depends_on_id":"Clavain-cna","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"Clavain-vbt","title":"Merge claude-automation-recommender into Clavain","description":"Pull claude-automation-recommender skill from official claude-code-setup plugin. Analyzes codebases and recommends Claude Code automations (hooks, skills, MCP servers, subagents). Medium value — useful but not core to agent rig.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-vpf","title":"Reconcile agent/command counts across docs","description":"Filesystem has 35 agents (27 review + 5 research + 3 workflow) but CLAUDE.md, AGENTS.md, and plugin.json all say 29. The 6 fd-v2 agents were added without doc updates. Also AGENTS.md says 27 commands but filesystem has 24. Update all three files to match reality. Must happen before writing test count assertions.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T12:18:01Z","created_by":"mk","updated_at":"2026-02-10T12:25:30Z","closed_at":"2026-02-10T12:25:30Z","close_reason":"Updated CLAUDE.md, AGENTS.md, and plugin.json: 29→35 agents, 21→27 review agents"}
{"id":"Clavain-vte","title":"Create agent-observability skill","description":"Token tracking, error monitoring, cost dashboards for production agent rigs. References agent-mail's observability.md and operations_alignment_checklist.md. Pattern guidance, not tooling.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T01:03:02Z","created_by":"mk","updated_at":"2026-02-08T01:06:36Z","closed_at":"2026-02-08T01:06:36Z","close_reason":"Wrong framing — Clavain is a modpack, not a monolith. Replacing with modpack-oriented issues."}
{"id":"Clavain-w219","title":"Add /triage-prs command for repo-wide PR backlog management","description":"Compound-engineering added /triage-prs that triages all open PRs using parallel review agents. Clavain has /resolve (fix PR comments) but nothing for triaging a backlog. Adapts upstream command, integrates fd-* review agents, complements /resolve.","notes":"Plan: docs/plans/Clavain-w219-triage-prs.md","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:09.15224717-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.102170482-08:00","closed_at":"2026-02-11T12:04:49.102170482-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-weo","title":"Sanitize GitHub Actions script injection in pr-agent-commands.yml","description":"PR comment body interpolated directly into JS template literals via ${{ }} expressions instead of process.env. Affects pr-agent-commands.yml:75,203. Replace with env: + process.env pattern. Source: flux-drive SEC-1 (HIGH).","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:03Z","created_by":"mk","updated_at":"2026-02-09T00:14:37Z","closed_at":"2026-02-09T00:14:37Z","close_reason":"All ${{ }} expressions moved to env: blocks in pr-agent-commands.yml. Zero script injection vectors remain."}
{"id":"Clavain-wf3","title":"/lfg: reorder so plan-review gates execution, pass plan path to /work","description":"Currently /lfg runs: brainstorm → plan → execute → review plan (flux-drive) → code review → quality-gates. Reviewing the plan after executing it is backward. Reorder: brainstorm → write-plan → plan-review (gate) → execute → quality-gates → resolve → ship. Also pass the plan file path from Step 2 into /work in Step 3 so execution isn't ambiguous. Source: Oracle interpeer deep review Findings 12+13.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:10Z","created_by":"mk","updated_at":"2026-02-09T07:18:16Z","closed_at":"2026-02-09T07:18:16Z","close_reason":"Closed"}
{"id":"Clavain-wjh","title":"flux-drive: Add model hints for Tier 3 agents (Phase 1)","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T14:29:21Z","created_by":"mk","updated_at":"2026-02-08T14:31:11Z","closed_at":"2026-02-08T14:31:11Z","close_reason":"Added Model column to Tier 3 table: haiku for pattern matching, sonnet for reasoning-heavy domains"}
{"id":"Clavain-xbde","title":"Soften EXTREMELY-IMPORTANT block to professional tone","description":"The 8-line all-caps scolding block in using-clavain/SKILL.md is counterproductive for trust. Replace with a neutral policy line: Clavain skills are designed to be invoked proactively. When a skill matches the current task, invoke it before responding. See UX review + Oracle.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:26.816796004-08:00","created_by":"mk","updated_at":"2026-02-11T10:46:17.818445295-08:00","closed_at":"2026-02-11T10:46:17.818445295-08:00","close_reason":"All 4 P1 quick wins landed: jq guard in both Stop hooks, 3 redirect skills removed (30 skills now), /clavain:setup hint in SessionStart, EXTREMELY-IMPORTANT block replaced with professional tone. 485 tests pass."}
{"id":"Clavain-xnsu","title":"Expand smoke test suite — full agent coverage + command \u0026 E2E tests","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T19:04:54.565819195-08:00","created_by":"mk","updated_at":"2026-02-11T19:07:28.0827167-08:00","closed_at":"2026-02-11T19:07:28.0827167-08:00","close_reason":"Expanded smoke tests from 8 to 24 test cases (16 agents + 5 commands + 3 workflows)"}
{"id":"Clavain-xpmp","title":"Upgrade domain profile Agent Specifications from nouns to actions","description":"P1-3 from fd-prompt-engineering review. Agent Specifications in config/flux-drive/domains/*.md use noun phrases ('Instruction clarity and unambiguity') instead of action verbs ('Check that SKILL.md instructions use imperative verbs'). The Injection Criteria in the same files already use the correct format. Rewrite all 11 domain profiles' Agent Specifications to use verb + what to check + threshold format. This is the source material that feeds into the template — if the source is weak, the template can't compensate.","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T19:19:46.6353978-08:00","created_by":"mk","updated_at":"2026-02-12T20:42:18.277739779-08:00","closed_at":"2026-02-12T20:42:18.277739779-08:00","close_reason":"Rewrote all 120 Agent Specification review items across 11 domain profiles from noun phrases to action-verb format (Check/Verify/Flag/Validate/Confirm/Ensure + pass/fail criteria). Dispatched via Codex agent under clodex mode."}
{"id":"Clavain-xweh","title":"Formalize interactive-to-autonomous shift-work boundary in workflows","description":"Inspired by StrongDM's Shift Work technique. Clavain's /lfg already separates interactive (brainstorm, plan) from autonomous (execute) phases, but the boundary is implicit. Formalize this: (1) define 'spec completeness' criteria — plan approved, tests defined, acceptance criteria written (2) auto-detect when spec is complete and suggest switching to autonomous mode (3) document the pattern in using-clavain. Also consider: clodex-toggle is a manual version of this — could be triggered automatically when spec completeness is detected.","design":"docs/research/shift-work-boundary.md","notes":"Flux-drive review complete (2026-02-11). Needs most design iteration. Key issues: (1) collapse autonomous into clodex toggle, not new flag, (2) batch=min(ALL,10) ceiling for context safety, (3) grep heuristics too fragile — use section headers or human-confirmed checklist, (4) add pause escape hatch + mandatory incremental commits. Ship last of the three.","status":"open","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:06:29.757480765-08:00","created_by":"mk","updated_at":"2026-02-11T13:33:36.616526057-08:00"}
{"id":"Clavain-y0i","title":"Split flux-drive SKILL.md into progressive phase files","description":"flux-drive at 745 lines/32KB is the largest skill. Contains 4 phases, Codex dispatch (4.5KB dead weight in Task path), and cross-AI escalation. Split into SKILL.md entry point (~2KB) + phases/launch.md + phases/launch-codex.md + phases/synthesize.md + phases/cross-ai.md. Reduces initial load from 32KB to ~2KB. Source: flux-drive P1-12.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:44Z","created_by":"mk","updated_at":"2026-02-09T08:02:05Z","closed_at":"2026-02-09T08:02:05Z","close_reason":"Closed"}
{"id":"Clavain-y5r","title":"SessionStart hook: downgrade companions to FYI, fix stderr mixing, portable stat","description":"Three hook improvements: (1) Companion detection wrapped in EXTREMELY_IMPORTANT — should be FYI-level, only elevate when actionable. (2) cat SKILL.md 2\u003e\u00261 mixes stderr into injected content — should fail gracefully with short error note. (3) stat -c is GNU-specific, breaks on macOS/BSD — use portable alternative or fallback. Source: Oracle interpeer deep review Findings 18-20.","status":"closed","priority":3,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:21Z","created_by":"mk","updated_at":"2026-02-09T07:16:41Z","closed_at":"2026-02-09T07:16:41Z","close_reason":"Closed"}
{"id":"Clavain-y8ub","title":"F8: Discovery + Phase Integration","description":"Phase tracking as ranking signal in work discovery. Phase advancement bonus in scoring. /lfg \u003cbead-id\u003e routes by phase.","status":"closed","priority":3,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:53.377686542-08:00","created_by":"mk","updated_at":"2026-02-13T15:03:05.582680383-08:00","closed_at":"2026-02-13T15:03:05.582680383-08:00","close_reason":"Shipped in interphase 0.3.0","dependencies":[{"issue_id":"Clavain-y8ub","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.497791995-08:00","created_by":"mk"},{"issue_id":"Clavain-y8ub","depends_on_id":"Clavain-a3hp","type":"blocks","created_at":"2026-02-12T11:02:04.522458261-08:00","created_by":"mk"},{"issue_id":"Clavain-y8ub","depends_on_id":"Clavain-z661","type":"blocks","created_at":"2026-02-12T11:02:04.58241711-08:00","created_by":"mk"}]}
{"id":"Clavain-yg0","title":"Fix CLAUDE.md validation comment (28→29) and add Rust to language list","description":"CLAUDE.md:17 says Should be 28 but actual agent count is 29. CLAUDE.md:31 lists Go/Python/TypeScript/Shell but omits Rust despite rust-reviewer.md existing. Fix: 2 line edits. Source: flux-drive P0-2, P1-1.","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:19:08Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-yl2","title":"Extract concurrency-reviewer code examples to references/ directory","description":"concurrency-reviewer.md at 606 lines/20KB has inline Go, Python, TypeScript, Shell, JS examples across 11 sections. Extract to agents/review/references/concurrency-patterns.md. Reduces per-dispatch from ~5000 to ~1500 tokens. Source: flux-drive P2-14 (2 agents).","status":"closed","priority":3,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:20:56Z","created_by":"mk","updated_at":"2026-02-09T00:36:31Z","closed_at":"2026-02-09T00:36:31Z","close_reason":"Extracted 30 code blocks from concurrency-reviewer.md to references/concurrency-patterns.md. Reviewer reduced from 606→151 lines."}
{"id":"Clavain-ymf","title":"Fix /work Phase 4 step numbering (jumps from 2 to 4)","description":"commands/work.md Phase 4 Ship has steps 1, 2, 4 — step 3 is missing. Likely a copy-paste artifact where step 3 was deleted without renumbering. Source: flux-drive P2-6.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T22:21:07Z","created_by":"mk","updated_at":"2026-02-08T23:07:54Z","closed_at":"2026-02-08T23:07:54Z","close_reason":"Closed"}
{"id":"Clavain-yt09","title":"[fd] Fix clodex wording — behavioral not enforced, demonstrate wrapper pattern","description":"From flux-drive review of joyful-wondering-seal (2026-02-12).\n\nAgents: fd-quality (P1-2, P1-4, P1-1), fd-prompt-engineering (P1-1, P1-2)\nConvergence: 2/4 agents\n\nMultiple wording/specification issues: (1) toggle output says \"will be blocked by hook\" which is a lie after removal — must say behavioral, (2) thin wrapper pattern not demonstrated — Step 2 needs command body example, (3) script missing error handling ($PROJECT_DIR validation), (4) destructive Bash commands (rm/mv source) not restricted, (5) shebang not specified (existing bead Clavain-gomw covers shebangs separately).\n\nReview output: docs/research/flux-drive/joyful-wondering-seal/","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T20:24:01.746013604-08:00","created_by":"mk","updated_at":"2026-02-12T20:42:37.053255368-08:00","closed_at":"2026-02-12T20:42:37.053255368-08:00","close_reason":"Addressed: clodex-toggle.sh script has PROJECT_DIR validation + full behavioral contract output (no hook references). commands/clodex-toggle.md rewritten as thin wrapper with find-based resolution chain. shebang is #!/usr/bin/env bash."}
{"id":"Clavain-z18","title":"P1: brainstorm.md mapped from two upstreams — merge ambiguity","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:23:38Z","created_by":"mk","updated_at":"2026-02-08T04:21:04Z","closed_at":"2026-02-08T04:21:04Z","close_reason":"Closed"}
{"id":"Clavain-z661","title":"F5: Phase State Tracking","description":"Add bd set-state phase=X calls to all workflow commands. No enforcement — tracking only. Entry point inferred from first action.","notes":"F5 implementation complete: lib-phase.sh created, 9 commands updated, 620 tests pass. Ready to commit and close.","status":"closed","priority":2,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-12T11:01:50.049943263-08:00","created_by":"mk","updated_at":"2026-02-12T14:42:43.663501544-08:00","closed_at":"2026-02-12T14:42:43.663501544-08:00","close_reason":"F5 implemented: lib-phase.sh + 9 command updates. 620 tests pass.","labels":["phase:done"],"dependencies":[{"issue_id":"Clavain-z661","depends_on_id":"Clavain-tayp","type":"blocks","created_at":"2026-02-12T11:02:00.330344886-08:00","created_by":"mk"}]}
{"id":"Clavain-z661.1","title":"State change: phase → executing","description":"Set phase to executing\n\nReason: Testing phase tracking API","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T14:36:59.448991931-08:00","created_by":"mk","updated_at":"2026-02-12T14:36:59.448991931-08:00","dependencies":[{"issue_id":"Clavain-z661.1","depends_on_id":"Clavain-z661","type":"parent-child","created_at":"2026-02-12T14:36:59.451094587-08:00","created_by":"mk"}]}
{"id":"Clavain-z661.2","title":"State change: phase → planned","description":"Changed phase from executing to planned\n\nReason: Test from lib-phase.sh","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T14:37:08.09967252-08:00","created_by":"mk","updated_at":"2026-02-12T14:37:08.09967252-08:00","dependencies":[{"issue_id":"Clavain-z661.2","depends_on_id":"Clavain-z661","type":"parent-child","created_at":"2026-02-12T14:37:08.105700791-08:00","created_by":"mk"}]}
{"id":"Clavain-z661.3","title":"State change: phase → brainstorm","description":"Changed phase from executing to brainstorm\n\nReason: Integration test","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T14:40:06.612039869-08:00","created_by":"mk","updated_at":"2026-02-12T14:40:06.612039869-08:00","dependencies":[{"issue_id":"Clavain-z661.3","depends_on_id":"Clavain-z661","type":"parent-child","created_at":"2026-02-12T14:40:06.613738554-08:00","created_by":"mk"}]}
{"id":"Clavain-z661.4","title":"State change: phase → executing","description":"Changed phase from brainstorm to executing\n\nReason: Executing: docs/plans/2026-02-12-phase-state-tracking.md","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T14:41:15.499537725-08:00","created_by":"mk","updated_at":"2026-02-12T14:41:15.499537725-08:00","dependencies":[{"issue_id":"Clavain-z661.4","depends_on_id":"Clavain-z661","type":"parent-child","created_at":"2026-02-12T14:41:15.501240009-08:00","created_by":"mk"}]}
{"id":"Clavain-z661.5","title":"State change: phase → done","description":"Changed phase from brainstorm to done\n\nReason: Shipped in commit 3a26569","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-12T14:42:38.971450364-08:00","created_by":"mk","updated_at":"2026-02-12T14:42:38.971450364-08:00","dependencies":[{"issue_id":"Clavain-z661.5","depends_on_id":"Clavain-z661","type":"parent-child","created_at":"2026-02-12T14:42:38.974922938-08:00","created_by":"mk"}]}
{"id":"Clavain-z9q","title":"Architecture diagrams omit 2 hook scripts","description":"AGENTS.md architecture section mentions hooks but doesn't list all 3 scripts (session-start.sh, agent-mail-register.sh, dotfiles-sync.sh) in the directory structure diagram.","status":"closed","priority":4,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-08T00:25:16Z","created_by":"mk","updated_at":"2026-02-08T08:38:40Z","closed_at":"2026-02-08T08:38:40Z","close_reason":"Already fixed — AGENTS.md lines 41-43 list all 3 hook scripts"}
{"id":"Clavain-zhs","title":"P0: Broken upstreams.json fileMap — 5 underscore filenames","description":"- type: bug","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-07T13:42:34Z","updated_at":"2026-02-07T20:12:21Z","closed_at":"2026-02-07T20:12:21Z","close_reason":"Closed","labels":["flux-drive"]}
{"id":"Clavain-zkds","title":"Audit and apply disable-model-invocation to reduce context budget","description":"Systematically apply disable-model-invocation: true to workflow/utility commands and manual-only skills. Compound-engineering discovered Claude Code silently excludes components when plugins exceed 16K description budget. Clavain partially uses this (17 files) but not systematically. Audit all 28 commands + 30 skills, mark manual-invocation-only ones.","notes":"Plan: docs/plans/Clavain-zkds-context-budget-audit.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T11:00:05.829477298-08:00","created_by":"mk","updated_at":"2026-02-11T12:04:49.074658214-08:00","closed_at":"2026-02-11T12:04:49.074658214-08:00","close_reason":"All 6 upstream integration beads completed in /lfg workflow"}
{"id":"Clavain-zkm","title":"/work: remove PR language, single trunk-based commit workflow","description":"/work Phase 4 has contradictory shipping semantics — says trunk-based but also mentions 'Link to PR' and includes two different commit workflows. Remove all PR references (trunk-based is a design decision). Keep single commit recipe. Source: Oracle interpeer deep review Finding 15.","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-09T07:08:13Z","created_by":"mk","updated_at":"2026-02-09T07:17:37Z","closed_at":"2026-02-09T07:17:37Z","close_reason":"Closed"}
{"id":"Clavain-zp9n","title":"Add /clavain:doctor health check command","description":"Oracle unique insight. Check: qmd present and responding, context7 reachable, oracle/codex present, beads initialized, conflicting plugins disabled. This is setup friction reducer #1 for a modpack plugin.","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-11T01:21:32.936363467-08:00","created_by":"mk","updated_at":"2026-02-11T12:27:04.604466056-08:00","closed_at":"2026-02-11T12:27:04.604466056-08:00","close_reason":"P1 beads completed in /lfg workflow"}
{"id":"Clavain-zuu","title":"Add silent compounding to synthesize.md","description":"Add Post-synthesis section with background Task compounding agent. Reads Findings Index, writes knowledge entries, handles provenance and decay.","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-10T09:42:22Z","created_by":"mk","updated_at":"2026-02-10T09:59:18Z","closed_at":"2026-02-10T09:59:18Z","close_reason":"Phase 3 complete — all Codex agents succeeded","dependencies":[{"issue_id":"Clavain-zuu","depends_on_id":"Clavain-uid","type":"blocks","created_at":"2026-02-11T07:31:41Z","created_by":"bootstrap","metadata":"{}"}]}
