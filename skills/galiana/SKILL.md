---
name: galiana
description: Show discipline analytics — defect escape rate, override rate, cost metrics, and agent scorecard
---

# Galiana — Discipline Analytics

Use this skill to render Galiana KPI output from the local cache in a consistent diagnostic-first view.

## Step 1: Run analyzer

Locate the analyzer in plugin cache first, then in local dev checkouts:

```bash
GALIANA_SCRIPT=$(find ~/.claude/plugins/cache -path '*/clavain/*/galiana/analyze.py' 2>/dev/null | head -1)
[[ -z "$GALIANA_SCRIPT" ]] && GALIANA_SCRIPT=$(find ~/projects -path '*/hub/clavain/galiana/analyze.py' 2>/dev/null | head -1)
```

If found, run:

```bash
CLAVAIN_PLUGIN_DIR="$(dirname "$(dirname "$GALIANA_SCRIPT")")"
python3 "$CLAVAIN_PLUGIN_DIR/galiana/analyze.py"
```

If no script is found, explain that Galiana is not installed and stop.

## Step 2: Read KPI cache

Read `~/.clavain/galiana-kpis.json`. If it does not exist or has no KPI payload, show a getting-started message that explains KPI events are generated by disciplined review/testing workflows and defect logging.

## Step 3: Present results

Render the response in this format:

```text
Galiana — Discipline Analytics
════════════════════════════════
Period: YYYY-MM-DD to YYYY-MM-DD
Beads shipped: N | Events analyzed: N

KPIs (diagnostic-first)
────────────────────────
[worst metric first]
[...]
[healthiest metric last]

Agent Scorecard
────────────────
Agent             Findings  P0  P1
fd-architecture   5         0   2
fd-quality        3         1   1

Advisories
──────────
- [info] ...
- [warn] ...
```

## KPI rules

- Order KPIs diagnostically: worst metrics first, healthiest last.
- Format every KPI exactly as: `KPI Name: value (numerator/denominator)`.
- Include the Agent Scorecard table when scorecard data exists.
- List advisories at the end, preserving severity labels like `[info]`, `[warn]`, `[critical]`.

## Offer per-bead drill-down

After the report, offer:

`Want per-bead analytics? Run Galiana with --bead <id>.`
